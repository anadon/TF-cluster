<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Affymetrix Fusion SDK: C:/f112/affy/sdk/calvin_files/utils/src/Calvin.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Affymetrix Fusion SDK&#160;<span id="projectnumber">Release 1.1.2  OUTPUT_DIRECTORY=affy/sdk/interface_docs/</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_calvin_8cpp.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>Calvin.cpp</h1>  </div>
</div>
<div class="contents">
<a href="_calvin_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="comment">//</span>
<a name="l00003"></a>00003 <span class="comment">// Copyright (C) 2005 Affymetrix, Inc.</span>
<a name="l00004"></a>00004 <span class="comment">//</span>
<a name="l00005"></a>00005 <span class="comment">// This library is free software; you can redistribute it and/or modify</span>
<a name="l00006"></a>00006 <span class="comment">// it under the terms of the GNU Lesser General Public License </span>
<a name="l00007"></a>00007 <span class="comment">// (version 2.1) as published by the Free Software Foundation.</span>
<a name="l00008"></a>00008 <span class="comment">// </span>
<a name="l00009"></a>00009 <span class="comment">// This library is distributed in the hope that it will be useful, but</span>
<a name="l00010"></a>00010 <span class="comment">// WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY</span>
<a name="l00011"></a>00011 <span class="comment">// or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License</span>
<a name="l00012"></a>00012 <span class="comment">// for more details.</span>
<a name="l00013"></a>00013 <span class="comment">// </span>
<a name="l00014"></a>00014 <span class="comment">// You should have received a copy of the GNU Lesser General Public License</span>
<a name="l00015"></a>00015 <span class="comment">// along with this library; if not, write to the Free Software Foundation, Inc.,</span>
<a name="l00016"></a>00016 <span class="comment">// 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA </span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00019"></a>00019 <span class="comment"></span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;calvin_files/utils/src/Calvin.h&quot;</span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;util/AffxMultiDimensionalArray.h&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;util/Fs.h&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;util/Util.h&quot;</span>
<a name="l00025"></a>00025 <span class="comment">//</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;typeinfo&gt;</span>
<a name="l00027"></a>00027 <span class="comment">//</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 
<a name="l00030"></a><a class="code" href="class_calvin.html#a5b90212ce68c2c82221965b1ab74b7d6">00030</a> <span class="keywordtype">void</span> <a class="code" href="class_calvin.html#a5b90212ce68c2c82221965b1ab74b7d6">Calvin::test</a>()
<a name="l00031"></a>00031 {
<a name="l00032"></a>00032         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;*&quot;</span>);
<a name="l00033"></a>00033         std::set&lt;std::string&gt; setIgnore;
<a name="l00034"></a>00034         std::map&lt;std::string, float&gt; mapEpsilon;
<a name="l00035"></a>00035 
<a name="l00036"></a>00036         <span class="comment">// Header parameters to ignore</span>
<a name="l00037"></a>00037         setIgnore.insert(<span class="stringliteral">&quot;FileCreationTime&quot;</span>);
<a name="l00038"></a>00038         setIgnore.insert(<span class="stringliteral">&quot;FileIdentifier&quot;</span>);
<a name="l00039"></a>00039         setIgnore.insert(<span class="stringliteral">&quot;program-version&quot;</span>);
<a name="l00040"></a>00040         setIgnore.insert(<span class="stringliteral">&quot;create_date&quot;</span>);
<a name="l00041"></a>00041         setIgnore.insert(<span class="stringliteral">&quot;create-date&quot;</span>);
<a name="l00042"></a>00042         setIgnore.insert(<span class="stringliteral">&quot;affymetrix-algorithm-param-option-verbose&quot;</span>);
<a name="l00043"></a>00043         setIgnore.insert(<span class="stringliteral">&quot;affymetrix-algorithm-param-option-exec-guid&quot;</span>);
<a name="l00044"></a>00044         setIgnore.insert(<span class="stringliteral">&quot;affymetrix-algorithm-param-option-program-cvs-id&quot;</span>);
<a name="l00045"></a>00045         setIgnore.insert(<span class="stringliteral">&quot;affymetrix-algorithm-param-option-version-to-report&quot;</span>);
<a name="l00046"></a>00046         setIgnore.insert(<span class="stringliteral">&quot;affymetrix-algorithm-param-option-command-line&quot;</span>);
<a name="l00047"></a>00047         setIgnore.insert(<span class="stringliteral">&quot;affymetrix-algorithm-param-option-run-probeset-genotype&quot;</span>);
<a name="l00048"></a>00048         setIgnore.insert(<span class="stringliteral">&quot;affymetrix-algorithm-param-option-cels&quot;</span>);
<a name="l00049"></a>00049         setIgnore.insert(<span class="stringliteral">&quot;affymetrix-algorithm-param-option-out-dir&quot;</span>);
<a name="l00050"></a>00050         setIgnore.insert(<span class="stringliteral">&quot;affymetrix-algorithm-param-start-time-start&quot;</span>);
<a name="l00051"></a>00051         setIgnore.insert(<span class="stringliteral">&quot;affymetrix-algorithm-param-start-free-mem-at-start&quot;</span>);
<a name="l00052"></a>00052 
<a name="l00053"></a>00053         <span class="comment">// Data Set columns to ignore (Specify as Group.Set.Column).</span>
<a name="l00054"></a>00054         setIgnore.insert(<span class="stringliteral">&quot;Segments.CN.SegmentID&quot;</span>);
<a name="l00055"></a>00055         setIgnore.insert(<span class="stringliteral">&quot;Segments.LOH.SegmentID&quot;</span>);
<a name="l00056"></a>00056         setIgnore.insert(<span class="stringliteral">&quot;Segments.CNNeutralLOH.SegmentID&quot;</span>);
<a name="l00057"></a>00057         setIgnore.insert(<span class="stringliteral">&quot;Segments.NormalDiploid.SegmentID&quot;</span>);
<a name="l00058"></a>00058         setIgnore.insert(<span class="stringliteral">&quot;Segments.Mosaicism.SegmentID&quot;</span>);
<a name="l00059"></a>00059         setIgnore.insert(<span class="stringliteral">&quot;Segments.NoCall.SegmentID&quot;</span>);
<a name="l00060"></a>00060 
<a name="l00061"></a>00061         <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a> strFileName1 = <span class="stringliteral">&quot;c:/apt/affy/sdk/copynumber/apt-copynumber-workflow/regression/test-generated/GenomeWideSNP_6/copynumber_HapMap270_6_cels/NA07029_GW6_C.CN5.cnchp&quot;</span>;
<a name="l00062"></a>00062         <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a> strFileName2 = <span class="stringliteral">&quot;c:/apt/affy/sdk/regression-data/data/copy-number/GenomeWideSNP_6/copynumber_HapMap270_6_cels/NA07029_GW6_C.CN5.cnchp&quot;</span>;
<a name="l00063"></a>00063         <a class="code" href="class_calvin.html#a95ef40bca4fdfa04d22523a4390aec00">Calvin::equivalent</a>(strFileName1, strFileName2, setIgnore, mapEpsilon, (<span class="keywordtype">float</span>)0.0001, <span class="keyword">false</span>);
<a name="l00064"></a>00064         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;*&quot;</span>);
<a name="l00065"></a>00065 }
<a name="l00066"></a>00066 
<a name="l00072"></a><a class="code" href="class_calvin.html#a1feda4a8df6ede6bd45c053bc73f50c5">00072</a> <span class="keywordtype">bool</span> <a class="code" href="class_calvin.html#a1feda4a8df6ede6bd45c053bc73f50c5">Calvin::load</a>(<span class="keyword">const</span> <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a>&amp; strFileName)
<a name="l00073"></a>00073 {
<a name="l00074"></a>00074         <span class="keywordtype">bool</span> bSuccessful = <span class="keyword">false</span>;
<a name="l00075"></a>00075         <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a> strValue;
<a name="l00076"></a>00076         int8_t c = 0;
<a name="l00077"></a>00077         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> uc = 0;
<a name="l00078"></a>00078         <span class="keywordtype">short</span> n = 0;
<a name="l00079"></a>00079         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> un = 0;
<a name="l00080"></a>00080         <span class="keywordtype">int</span> i = 0;
<a name="l00081"></a>00081         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui = 0;
<a name="l00082"></a>00082         <span class="keywordtype">float</span> f = 0;
<a name="l00083"></a>00083         std::wstring wstr;
<a name="l00084"></a>00084         <a class="code" href="class_calvin.html#add8d20fe9c9b9fd3b0d3150fbe51a5d0">clear</a>();
<a name="l00085"></a>00085         <a class="code" href="classaffymetrix__calvin__io_1_1_generic_file_reader.html">affymetrix_calvin_io::GenericFileReader</a> reader;
<a name="l00086"></a>00086         <a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html">affymetrix_calvin_io::GenericData</a> genericData;
<a name="l00087"></a>00087         <span class="keywordflow">try</span>
<a name="l00088"></a>00088         {
<a name="l00089"></a>00089                 <a class="code" href="class_calvin.html#a4d530bb08c5e5e2b3961f4b881c4fab2">m_strFileName</a> = strFileName;
<a name="l00090"></a>00090 <span class="comment">//              Verbose::out(1, &quot;*&quot;);</span>
<a name="l00091"></a>00091                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Reading Calvin file: &quot;</span> + <a class="code" href="class_calvin.html#a4d530bb08c5e5e2b3961f4b881c4fab2">m_strFileName</a>);
<a name="l00092"></a>00092                 reader.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_file_reader.html#ad856db1d86014980c5edc13eb2a50b79">SetFilename</a>(<a class="code" href="class_calvin.html#a4d530bb08c5e5e2b3961f4b881c4fab2">m_strFileName</a>);
<a name="l00093"></a>00093                 reader.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_file_reader.html#a6d9d5489de9f16e5736bfa1b86995691">Open</a>(genericData);
<a name="l00094"></a>00094                 <a class="code" href="class_calvin.html#adb5dead1345f73c342bb9c9266c0a89e">getCalvinHeader</a>().<a class="code" href="class_affx_array.html#aedda32422b1e2be460d3e0c906415a66">add</a>(<span class="keyword">new</span> <a class="code" href="class_calvin_parameter.html">CalvinParameter</a>(<span class="stringliteral">&quot;FileCreationTime&quot;</span>, <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca32608dd12571799677d4e472299e312a">CalvinValue::TextType</a>, StringUtils::ConvertWCSToMBS(genericData.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr()-&gt;GetFileCreationTime())));   
<a name="l00095"></a>00095                 
<a name="l00096"></a>00096                 <a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html">affymetrix_calvin_io::GenericDataHeader</a>* pHeader = genericData.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr();
<a name="l00097"></a>00097                 <a class="code" href="class_calvin.html#a1252ce84a3fd529da2e840a8ed72f46a">loadHeader</a>(*pHeader, <a class="code" href="class_calvin.html#adb5dead1345f73c342bb9c9266c0a89e">getCalvinHeader</a>());
<a name="l00098"></a>00098                 <span class="keywordtype">int</span> iParentCount = genericData.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr()-&gt;GetParentCnt();
<a name="l00099"></a>00099                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iParentIndex = 0; (iParentIndex &lt; iParentCount); iParentIndex++)
<a name="l00100"></a>00100                 {
<a name="l00101"></a>00101                         <a class="code" href="class_calvin_header.html" title="A class for storing Calvin header data.">CalvinHeader</a>* pHeader = <span class="keyword">new</span> <a class="code" href="class_calvin_header.html" title="A class for storing Calvin header data.">CalvinHeader</a>;
<a name="l00102"></a>00102                         <a class="code" href="class_calvin.html#a4af8d17f87ec895da10d5cc0d582e64d">getParentCalvinHeaders</a>().<a class="code" href="class_affx_array.html#aedda32422b1e2be460d3e0c906415a66">add</a>(pHeader);
<a name="l00103"></a>00103                         <a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html">affymetrix_calvin_io::GenericDataHeader</a> Header = genericData.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr()-&gt;GetParent(iParentIndex);
<a name="l00104"></a>00104                         <a class="code" href="class_calvin.html#a1252ce84a3fd529da2e840a8ed72f46a">loadHeader</a>(Header, *pHeader);
<a name="l00105"></a>00105                 }       
<a name="l00106"></a>00106                 genericData.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr()-&gt;Clear();
<a name="l00107"></a>00107                 <a class="code" href="_affy_stl_collection_types_8h.html#aafbe16e1466760bd15b7fba33f192042">WStringVector</a> vDataGroupNames;
<a name="l00108"></a>00108                 genericData.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#a06cbe073cc803a554ede2a3d553ce8cb">DataGroupNames</a>(vDataGroupNames);
<a name="l00109"></a>00109                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uiDataGroupIndex = 0; (uiDataGroupIndex &lt; vDataGroupNames.size()); uiDataGroupIndex++)
<a name="l00110"></a>00110                 {
<a name="l00111"></a>00111                         <a class="code" href="class_calvin_data_group.html">CalvinDataGroup</a>* pGroup = <span class="keyword">new</span> <a class="code" href="class_calvin_data_group.html">CalvinDataGroup</a>;
<a name="l00112"></a>00112                         <a class="code" href="class_calvin.html#a56e4d1a92c1b0ae38a4c4e7e0edbea4a">getCalvinDataGroups</a>().<a class="code" href="class_affx_array.html#aedda32422b1e2be460d3e0c906415a66">add</a>(pGroup);
<a name="l00113"></a>00113                         pGroup-&gt;<a class="code" href="class_calvin_data_group.html#a0d6780274b380001c5f9c21fd46a4b15">setName</a>(StringUtils::ConvertWCSToMBS(vDataGroupNames[uiDataGroupIndex]));
<a name="l00114"></a>00114                         <a class="code" href="_affy_stl_collection_types_8h.html#aafbe16e1466760bd15b7fba33f192042">WStringVector</a> vDataSetNames;
<a name="l00115"></a>00115                         genericData.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#a9d22ef227637b4e68aeee1f111fa6f9f">DataSetNames</a>(uiDataGroupIndex, vDataSetNames);
<a name="l00116"></a>00116                         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uiDataSetIndex = 0; (uiDataSetIndex &lt; vDataSetNames.size()); uiDataSetIndex++)
<a name="l00117"></a>00117                         {
<a name="l00118"></a>00118                                 <a class="code" href="class_calvin_data_set.html">CalvinDataSet</a>* pSet = <span class="keyword">new</span> <a class="code" href="class_calvin_data_set.html">CalvinDataSet</a>;
<a name="l00119"></a>00119                                 pGroup-&gt;<a class="code" href="class_calvin_data_group.html#a96f147e9c19f8421c8f170a2468e9496">getCalvinDataSets</a>().<a class="code" href="class_affx_array.html#aedda32422b1e2be460d3e0c906415a66">add</a>(pSet);
<a name="l00120"></a>00120                                 <a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html">affymetrix_calvin_io::DataSet</a>* pDataSet = genericData.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#a3363c61f5da726d7a7ffcbc49e85a0b2">DataSet</a>(uiDataGroupIndex, uiDataSetIndex);
<a name="l00121"></a>00121                                 pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#af9403cf7cabee1069ca9c2437adc5992">Open</a>();
<a name="l00122"></a>00122                                 pSet-&gt;<a class="code" href="class_calvin_data_set.html#a504d8f2136a3b8c85937400fc300ad66">setName</a>(StringUtils::ConvertWCSToMBS(vDataSetNames[uiDataSetIndex]));
<a name="l00123"></a>00123                                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> uiColIndex = 0; (uiColIndex &lt; pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a2f39be338e28d30836c420d4add1073a">Cols</a>()); uiColIndex++)
<a name="l00124"></a>00124                                 {
<a name="l00125"></a>00125                                         pSet-&gt;<a class="code" href="class_calvin_data_set.html#ac0fe54e125f2361f9c6c6ac1abaf320c">getColumnHeaders</a>().<a class="code" href="class_affx_array.html#aedda32422b1e2be460d3e0c906415a66">add</a>(<span class="keyword">new</span> <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a>(StringUtils::ConvertWCSToMBS(pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetName())));
<a name="l00126"></a>00126                                 }
<a name="l00127"></a>00127                                 pSet-&gt;<a class="code" href="class_calvin_data_set.html#ae15ca8a4687fea50e44f133678936fd1">getCalvinValues</a>().<a class="code" href="class_affx_array.html#a9475808ff0646769920df0a67e16afe2">reserve</a>(pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ab51b565cd5e20692e83940027ad169c6">Rows</a>());
<a name="l00128"></a>00128                                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> uiRowIndex = 0; (uiRowIndex &lt; pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ab51b565cd5e20692e83940027ad169c6">Rows</a>()); uiRowIndex++)
<a name="l00129"></a>00129                                 {
<a name="l00130"></a>00130                                         <a class="code" href="class_affx_array.html" title="A template class derived from std::vector.">AffxArray&lt;CalvinValue&gt;</a>* pRow = <span class="keyword">new</span> <a class="code" href="class_affx_array.html" title="A template class derived from std::vector.">AffxArray&lt;CalvinValue&gt;</a>(0, pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a2f39be338e28d30836c420d4add1073a">Cols</a>());
<a name="l00131"></a>00131                                         pSet-&gt;<a class="code" href="class_calvin_data_set.html#ae15ca8a4687fea50e44f133678936fd1">getCalvinValues</a>().<a class="code" href="class_affx_array.html#aedda32422b1e2be460d3e0c906415a66">add</a>(pRow);
<a name="l00132"></a>00132                                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> uiColIndex = 0; (uiColIndex &lt; pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a2f39be338e28d30836c420d4add1073a">Cols</a>()); uiColIndex++)
<a name="l00133"></a>00133                                         {       
<a name="l00134"></a>00134                                                 strValue.clear();
<a name="l00135"></a>00135                                                 <span class="keywordflow">switch</span> (pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetColumnType())
<a name="l00136"></a>00136                                                 {
<a name="l00137"></a>00137                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca6c9238a8a9ce14e15d005e89671e1579">CalvinValue::Int8Type</a>:
<a name="l00138"></a>00138                                                         pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>(uiRowIndex, uiColIndex, c);
<a name="l00139"></a>00139                                                         strValue =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(c);
<a name="l00140"></a>00140                                                         <span class="keywordflow">break</span>;
<a name="l00141"></a>00141                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca34639c05fdcce562ead9aeaa1f36467f">CalvinValue::UInt8Type</a>:
<a name="l00142"></a>00142                                                         pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>(uiRowIndex, uiColIndex, uc);
<a name="l00143"></a>00143                                                         strValue =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(uc);
<a name="l00144"></a>00144                                                         <span class="keywordflow">break</span>;
<a name="l00145"></a>00145                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcabc1b50e800c3035ef16ce1c12b764edd">CalvinValue::Int16Type</a>:
<a name="l00146"></a>00146                                                         pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>(uiRowIndex, uiColIndex, n);
<a name="l00147"></a>00147                                                         strValue =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(n);
<a name="l00148"></a>00148                                                         <span class="keywordflow">break</span>;
<a name="l00149"></a>00149                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcad62acc4aece0eede8b9799fa64605e0e">CalvinValue::UInt16Type</a>:
<a name="l00150"></a>00150                                                         pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>(uiRowIndex, uiColIndex, un);
<a name="l00151"></a>00151                                                         strValue =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(un);
<a name="l00152"></a>00152                                                         <span class="keywordflow">break</span>;
<a name="l00153"></a>00153                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcafad92ef7f9371e47f99d9debc790a375">CalvinValue::Int32Type</a>:
<a name="l00154"></a>00154                                                         pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>(uiRowIndex, uiColIndex, i);
<a name="l00155"></a>00155                                                         strValue =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(i);
<a name="l00156"></a>00156                                                         <span class="keywordflow">break</span>;
<a name="l00157"></a>00157                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca092060ea46b180b1cc1511cb196bd276">CalvinValue::UInt32Type</a>:
<a name="l00158"></a>00158                                                         pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, ui);
<a name="l00159"></a>00159                                                         strValue =<a class="code" href="_affx_conv_8cpp.html#a3bfc6fcf2404cad091f4bc4433ba4ee3"> ::getUnsignedInt</a>(ui);
<a name="l00160"></a>00160                                                         <span class="keywordflow">break</span>;
<a name="l00161"></a>00161                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcae196db4427e25955d40149bf195733e2">CalvinValue::FloatType</a>:
<a name="l00162"></a>00162                                                         pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>(uiRowIndex, uiColIndex, f);
<a name="l00163"></a>00163                                                         strValue =<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2"> ::getDouble</a>(f, 10);
<a name="l00164"></a>00164                                                         <span class="keywordflow">break</span>;
<a name="l00165"></a>00165                                                 <span class="keywordflow">case</span> 7:
<a name="l00166"></a>00166                                                         pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>(uiRowIndex, uiColIndex, strValue);
<a name="l00167"></a>00167                                                         <span class="keywordflow">break</span>;
<a name="l00168"></a>00168                                                 <span class="keywordflow">case</span> 8:
<a name="l00169"></a>00169                                                         pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>(uiRowIndex, uiColIndex, wstr);
<a name="l00170"></a>00170                                                         strValue = StringUtils::ConvertWCSToMBS(wstr);
<a name="l00171"></a>00171                                                         <span class="keywordflow">break</span>;
<a name="l00172"></a>00172                                                 <span class="keywordflow">default</span>:
<a name="l00173"></a>00173                                                         <span class="keywordflow">break</span>;
<a name="l00174"></a>00174                                                 }
<a name="l00175"></a>00175                                                 pRow-&gt;<a class="code" href="class_affx_array.html#aedda32422b1e2be460d3e0c906415a66">add</a>(<span class="keyword">new</span> <a class="code" href="class_calvin_value.html">CalvinValue</a>((<a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdc">CalvinValue::ParameterType</a>)pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetColumnType(), strValue)); 
<a name="l00176"></a>00176                                         }
<a name="l00177"></a>00177                                 }
<a name="l00178"></a>00178                                 pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a48002a5c86691f4135769ee6b0eddd79">Close</a>();
<a name="l00179"></a>00179                                 pDataSet-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#acbb628f5a2c33bbd7a63cde52dad820f">Delete</a>();
<a name="l00180"></a>00180                         }
<a name="l00181"></a>00181                 }
<a name="l00182"></a>00182                 genericData.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#ac0062222cc46b8405b2dc050543fd9c2">Clear</a>();    
<a name="l00183"></a>00183                 bSuccessful = <span class="keyword">true</span>;
<a name="l00184"></a>00184         } <span class="keywordflow">catch</span>(...) {genericData.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#ac0062222cc46b8405b2dc050543fd9c2">Clear</a>(); <a class="code" href="class_err.html#a121c0cbb1687c93444a1b5f7f6ea56af">Err::errAbort</a>(<span class="stringliteral">&quot;Cannot read Calvin file: &quot;</span> + strFileName);}
<a name="l00185"></a>00185         <span class="keywordflow">return</span> bSuccessful;
<a name="l00186"></a>00186 }
<a name="l00187"></a>00187 
<a name="l00192"></a><a class="code" href="class_calvin.html#a1252ce84a3fd529da2e840a8ed72f46a">00192</a> <span class="keywordtype">void</span> <a class="code" href="class_calvin.html#a1252ce84a3fd529da2e840a8ed72f46a">Calvin::loadHeader</a>(<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html">affymetrix_calvin_io::GenericDataHeader</a>&amp; Header, <a class="code" href="class_calvin_header.html" title="A class for storing Calvin header data.">CalvinHeader</a>&amp; header)
<a name="l00193"></a>00193 {
<a name="l00194"></a>00194         <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a> strValue;
<a name="l00195"></a>00195         header.<a class="code" href="class_affx_array.html#a9475808ff0646769920df0a67e16afe2">reserve</a>(Header.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a1146def9d93b4ecbe5c13239f7b3d31d">GetNameValParamCnt</a>() + 4);
<a name="l00196"></a>00196         <span class="comment">//File header</span>
<a name="l00197"></a>00197         header.<a class="code" href="class_affx_array.html#aedda32422b1e2be460d3e0c906415a66">add</a>(<span class="keyword">new</span> <a class="code" href="class_calvin_parameter.html">CalvinParameter</a>(<span class="stringliteral">&quot;FileIdentifier&quot;</span>, <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca47593bcdb3f138507c93e32c33a94499">CalvinValue::AsciiType</a>, Header.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a11f21dee83156bb33470bc9475ef78c0">GetFileId</a>()));
<a name="l00198"></a>00198         header.<a class="code" href="class_affx_array.html#aedda32422b1e2be460d3e0c906415a66">add</a>(<span class="keyword">new</span> <a class="code" href="class_calvin_parameter.html">CalvinParameter</a>(<span class="stringliteral">&quot;FileTypeIdentifier&quot;</span>, <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca47593bcdb3f138507c93e32c33a94499">CalvinValue::AsciiType</a>, Header.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a84c60c56ba6c64b9fa2cc8f11aa52a81">GetFileTypeId</a>()));
<a name="l00199"></a>00199         header.<a class="code" href="class_affx_array.html#aedda32422b1e2be460d3e0c906415a66">add</a>(<span class="keyword">new</span> <a class="code" href="class_calvin_parameter.html">CalvinParameter</a>(<span class="stringliteral">&quot;FileLocale&quot;</span>, <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca32608dd12571799677d4e472299e312a">CalvinValue::TextType</a>, StringUtils::ConvertWCSToMBS(Header.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a5f88a9ef4cc42b1a2266bf60a38f0ac2">GetLocale</a>())));
<a name="l00200"></a>00200 
<a name="l00201"></a>00201         <span class="comment">// Header Parameters</span>
<a name="l00202"></a>00202         <span class="keywordtype">int</span> iParamCount = Header.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a1146def9d93b4ecbe5c13239f7b3d31d">GetNameValParamCnt</a>();
<a name="l00203"></a>00203         <a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html">affymetrix_calvin_parameter::ParameterNameValueType</a> param;
<a name="l00204"></a>00204         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iParamIndex = 0; (iParamIndex &lt; iParamCount); iParamIndex++)
<a name="l00205"></a>00205         {
<a name="l00206"></a>00206                 param = Header.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a5e68c1e00b3df93802665f617f2b8f9b">GetNameValParam</a>(iParamIndex);
<a name="l00207"></a>00207                 strValue.clear();
<a name="l00208"></a>00208                 <span class="keywordflow">switch</span> (param.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a0b06936378877cf91734053b08e27b0d">GetParameterType</a>())
<a name="l00209"></a>00209                 {
<a name="l00210"></a>00210                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca6c9238a8a9ce14e15d005e89671e1579">CalvinValue::Int8Type</a>:
<a name="l00211"></a>00211                         strValue =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#aaa3c72bbbd18ebea70fe9aadff678af9">GetValueInt8</a>());
<a name="l00212"></a>00212                         <span class="keywordflow">break</span>;
<a name="l00213"></a>00213                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca34639c05fdcce562ead9aeaa1f36467f">CalvinValue::UInt8Type</a>:
<a name="l00214"></a>00214                         strValue =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a6251a45bca7ba8810a3cdf0d5967b2aa">GetValueUInt8</a>());
<a name="l00215"></a>00215                         <span class="keywordflow">break</span>;
<a name="l00216"></a>00216                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcabc1b50e800c3035ef16ce1c12b764edd">CalvinValue::Int16Type</a>:
<a name="l00217"></a>00217                         strValue =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#af4377b31df1ed52daaa39858599390c9">GetValueInt16</a>());
<a name="l00218"></a>00218                         <span class="keywordflow">break</span>;
<a name="l00219"></a>00219                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcad62acc4aece0eede8b9799fa64605e0e">CalvinValue::UInt16Type</a>:
<a name="l00220"></a>00220                         strValue =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a3feeac19ce12f1cc1188d091fee5a911">GetValueUInt16</a>());
<a name="l00221"></a>00221                         <span class="keywordflow">break</span>;
<a name="l00222"></a>00222                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcafad92ef7f9371e47f99d9debc790a375">CalvinValue::Int32Type</a>:
<a name="l00223"></a>00223                         strValue =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#acce040a998f616a12f05d98dc022f9bf">GetValueInt32</a>());
<a name="l00224"></a>00224                         <span class="keywordflow">break</span>;
<a name="l00225"></a>00225                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca092060ea46b180b1cc1511cb196bd276">CalvinValue::UInt32Type</a>:
<a name="l00226"></a>00226                         strValue =<a class="code" href="_affx_conv_8cpp.html#a3bfc6fcf2404cad091f4bc4433ba4ee3"> ::getUnsignedInt</a>(param.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#ae4cba22a21766ee7320c715c779207fa">GetValueUInt32</a>());
<a name="l00227"></a>00227                         <span class="keywordflow">break</span>;
<a name="l00228"></a>00228                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcae196db4427e25955d40149bf195733e2">CalvinValue::FloatType</a>:
<a name="l00229"></a>00229                         strValue =<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2"> ::getDouble</a>(param.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a1163655eb9279e87c1eba046c2281d27">GetValueFloat</a>(), 10);
<a name="l00230"></a>00230                         <span class="keywordflow">break</span>;
<a name="l00231"></a>00231                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca47593bcdb3f138507c93e32c33a94499">CalvinValue::AsciiType</a>:
<a name="l00232"></a>00232                         strValue = param.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a93e92f72f4e28ba8594ba40780d4fd21">GetValueAscii</a>();
<a name="l00233"></a>00233                         <span class="keywordflow">break</span>;
<a name="l00234"></a>00234                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca32608dd12571799677d4e472299e312a">CalvinValue::TextType</a>:
<a name="l00235"></a>00235                         strValue = StringUtils::ConvertWCSToMBS(param.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#afab08fc7f9a92875eb46ff182eff8b03">GetValueText</a>());
<a name="l00236"></a>00236                         <span class="keywordflow">break</span>;
<a name="l00237"></a>00237                 <span class="keywordflow">default</span>:
<a name="l00238"></a>00238                         <span class="keywordflow">break</span>;
<a name="l00239"></a>00239                 }
<a name="l00240"></a>00240                 header.<a class="code" href="class_affx_array.html#aedda32422b1e2be460d3e0c906415a66">add</a>(<span class="keyword">new</span> <a class="code" href="class_calvin_parameter.html">CalvinParameter</a>(StringUtils::ConvertWCSToMBS(param.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a57579803f0a449d644b9f3a93c07da38">GetName</a>()), (<a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdc">CalvinValue::ParameterType</a>)param.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a0b06936378877cf91734053b08e27b0d">GetParameterType</a>(), strValue));
<a name="l00241"></a>00241         }
<a name="l00242"></a>00242 }
<a name="l00243"></a>00243 
<a name="l00244"></a>00244 
<a name="l00245"></a><a class="code" href="class_calvin.html#a95ef40bca4fdfa04d22523a4390aec00">00245</a> <span class="keywordtype">bool</span> <a class="code" href="class_calvin.html#a95ef40bca4fdfa04d22523a4390aec00">Calvin::equivalent</a>(<a class="code" href="class_calvin.html">Calvin</a>&amp; that, std::set&lt;std::string&gt;&amp; setIgnore, std::map&lt;std::string, float&gt;&amp; mapEpsilon, <span class="keywordtype">float</span> fEpsilon, <span class="keywordtype">bool</span> bCheckHeader, <span class="keywordtype">float</span> fFraction)
<a name="l00246"></a>00246 {
<a name="l00247"></a>00247         <span class="keywordflow">if</span> (bCheckHeader)
<a name="l00248"></a>00248         {
<a name="l00249"></a>00249                 <span class="keywordflow">if</span> (!<a class="code" href="class_calvin.html#a69a397710ea528e76a8c02316f8f489b">equivalentHeader</a>(<span class="stringliteral">&quot;File &quot;</span>, <a class="code" href="class_calvin.html#adb5dead1345f73c342bb9c9266c0a89e">getCalvinHeader</a>(), that.<a class="code" href="class_calvin.html#adb5dead1345f73c342bb9c9266c0a89e">getCalvinHeader</a>(), setIgnore, mapEpsilon, fEpsilon, fFraction)) 
<a name="l00250"></a>00250                 {
<a name="l00251"></a>00251                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00252"></a>00252                 }
<a name="l00253"></a>00253                 <span class="keywordflow">if</span> (<a class="code" href="class_calvin.html#a4af8d17f87ec895da10d5cc0d582e64d">getParentCalvinHeaders</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>() != that.<a class="code" href="class_calvin.html#a4af8d17f87ec895da10d5cc0d582e64d">getParentCalvinHeaders</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>())
<a name="l00254"></a>00254                 {
<a name="l00255"></a>00255                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Files do not have the same number of Parent Headers.&quot;</span>);
<a name="l00256"></a>00256                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00257"></a>00257                 }
<a name="l00258"></a>00258                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iParentIndex = 0; (iParentIndex &lt; <a class="code" href="class_calvin.html#a4af8d17f87ec895da10d5cc0d582e64d">getParentCalvinHeaders</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>()); iParentIndex++)
<a name="l00259"></a>00259                 {
<a name="l00260"></a>00260                         <span class="keywordflow">if</span> (!<a class="code" href="class_calvin.html#a69a397710ea528e76a8c02316f8f489b">equivalentHeader</a>(<span class="stringliteral">&quot;Parent &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d">getInt</a>(iParentIndex + 1) + <span class="stringliteral">&quot; &quot;</span>, *this-&gt;<a class="code" href="class_calvin.html#a4af8d17f87ec895da10d5cc0d582e64d">getParentCalvinHeaders</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iParentIndex), *that.<a class="code" href="class_calvin.html#a4af8d17f87ec895da10d5cc0d582e64d">getParentCalvinHeaders</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iParentIndex), setIgnore, mapEpsilon, fEpsilon, fFraction)) 
<a name="l00261"></a>00261                         {
<a name="l00262"></a>00262                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00263"></a>00263                         }
<a name="l00264"></a>00264                 }
<a name="l00265"></a>00265         }
<a name="l00266"></a>00266         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_calvin.html#a56e4d1a92c1b0ae38a4c4e7e0edbea4a">getCalvinDataGroups</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>() != that.<a class="code" href="class_calvin.html#a56e4d1a92c1b0ae38a4c4e7e0edbea4a">getCalvinDataGroups</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>())
<a name="l00267"></a>00267         {
<a name="l00268"></a>00268                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Files do not have the same number of Data Groups.&quot;</span>);
<a name="l00269"></a>00269                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00270"></a>00270         }
<a name="l00271"></a>00271         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iGroupIndex = 0; (iGroupIndex &lt; <a class="code" href="class_calvin.html#a56e4d1a92c1b0ae38a4c4e7e0edbea4a">getCalvinDataGroups</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>()); iGroupIndex++)
<a name="l00272"></a>00272         {
<a name="l00273"></a>00273                 <a class="code" href="class_calvin_data_group.html">CalvinDataGroup</a>* pThisGroup = this-&gt;<a class="code" href="class_calvin.html#a56e4d1a92c1b0ae38a4c4e7e0edbea4a">getCalvinDataGroups</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iGroupIndex);
<a name="l00274"></a>00274                 <a class="code" href="class_calvin_data_group.html">CalvinDataGroup</a>* pThatGroup = that.<a class="code" href="class_calvin.html#a56e4d1a92c1b0ae38a4c4e7e0edbea4a">getCalvinDataGroups</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iGroupIndex);
<a name="l00275"></a>00275                 <span class="keywordflow">if</span> (pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>() != pThatGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>())
<a name="l00276"></a>00276                 {
<a name="l00277"></a>00277                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;File Data Group name mismatch: &quot;</span> + pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>() + <span class="stringliteral">&quot; != &quot;</span> + pThatGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>());
<a name="l00278"></a>00278                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00279"></a>00279                 }
<a name="l00280"></a>00280                 <span class="keywordflow">if</span> (pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#a96f147e9c19f8421c8f170a2468e9496">getCalvinDataSets</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>() != pThatGroup-&gt;<a class="code" href="class_calvin_data_group.html#a96f147e9c19f8421c8f170a2468e9496">getCalvinDataSets</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>())
<a name="l00281"></a>00281                 {
<a name="l00282"></a>00282                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Data Group &quot;</span> + pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>() + <span class="stringliteral">&quot; does not have the same number of Data Sets.&quot;</span>);
<a name="l00283"></a>00283                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00284"></a>00284                 }
<a name="l00285"></a>00285                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSetIndex = 0; (iSetIndex &lt; pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#a96f147e9c19f8421c8f170a2468e9496">getCalvinDataSets</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>()); iSetIndex++)
<a name="l00286"></a>00286                 {
<a name="l00287"></a>00287                         <a class="code" href="class_calvin_data_set.html">CalvinDataSet</a>* pThisSet = pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#a96f147e9c19f8421c8f170a2468e9496">getCalvinDataSets</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iSetIndex);
<a name="l00288"></a>00288                         <a class="code" href="class_calvin_data_set.html">CalvinDataSet</a>* pThatSet = pThatGroup-&gt;<a class="code" href="class_calvin_data_group.html#a96f147e9c19f8421c8f170a2468e9496">getCalvinDataSets</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iSetIndex);
<a name="l00289"></a>00289                         <span class="keywordflow">if</span> (pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#a6c00c9e61788ec110ce135dc11bc2589">getName</a>() != pThatSet-&gt;<a class="code" href="class_calvin_data_set.html#a6c00c9e61788ec110ce135dc11bc2589">getName</a>())
<a name="l00290"></a>00290                         {
<a name="l00291"></a>00291                                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;File Data Set name mismatch: &quot;</span> + pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#a6c00c9e61788ec110ce135dc11bc2589">getName</a>() + <span class="stringliteral">&quot; != &quot;</span> + pThatGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + pThatSet-&gt;<a class="code" href="class_calvin_data_set.html#a6c00c9e61788ec110ce135dc11bc2589">getName</a>());
<a name="l00292"></a>00292                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00293"></a>00293                         }
<a name="l00294"></a>00294                         <span class="keywordflow">if</span> (pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#ac0fe54e125f2361f9c6c6ac1abaf320c">getColumnHeaders</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>() != pThatSet-&gt;<a class="code" href="class_calvin_data_set.html#ac0fe54e125f2361f9c6c6ac1abaf320c">getColumnHeaders</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>())
<a name="l00295"></a>00295                         {
<a name="l00296"></a>00296                                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Data Set &quot;</span> + pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#a6c00c9e61788ec110ce135dc11bc2589">getName</a>() + <span class="stringliteral">&quot; does not have the same number of Columns.&quot;</span>);
<a name="l00297"></a>00297                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00298"></a>00298                         }
<a name="l00299"></a>00299                         <span class="keywordflow">if</span> (pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#ae15ca8a4687fea50e44f133678936fd1">getCalvinValues</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>() != pThatSet-&gt;<a class="code" href="class_calvin_data_set.html#ae15ca8a4687fea50e44f133678936fd1">getCalvinValues</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>())
<a name="l00300"></a>00300                         {
<a name="l00301"></a>00301                                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Data Set &quot;</span> + pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#a6c00c9e61788ec110ce135dc11bc2589">getName</a>() + <span class="stringliteral">&quot; does not have the same number of Rows.&quot;</span>);
<a name="l00302"></a>00302                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00303"></a>00303                         }
<a name="l00304"></a>00304                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iColIndex = 0; (iColIndex &lt; pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#ac0fe54e125f2361f9c6c6ac1abaf320c">getColumnHeaders</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>()); iColIndex++)
<a name="l00305"></a>00305                         {
<a name="l00306"></a>00306                                 <span class="keywordflow">if</span> (*pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#ac0fe54e125f2361f9c6c6ac1abaf320c">getColumnHeaders</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iColIndex) != *pThatSet-&gt;<a class="code" href="class_calvin_data_set.html#ac0fe54e125f2361f9c6c6ac1abaf320c">getColumnHeaders</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iColIndex))
<a name="l00307"></a>00307                                 {
<a name="l00308"></a>00308                                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;File Data Set column name mismatch: &quot;</span> + pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#a6c00c9e61788ec110ce135dc11bc2589">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + *pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#ac0fe54e125f2361f9c6c6ac1abaf320c">getColumnHeaders</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iColIndex) + <span class="stringliteral">&quot; != &quot;</span> + pThatGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + pThatSet-&gt;<a class="code" href="class_calvin_data_set.html#a6c00c9e61788ec110ce135dc11bc2589">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + *pThatSet-&gt;<a class="code" href="class_calvin_data_set.html#ac0fe54e125f2361f9c6c6ac1abaf320c">getColumnHeaders</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iColIndex));
<a name="l00309"></a>00309                                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00310"></a>00310                                 }
<a name="l00311"></a>00311                         }
<a name="l00312"></a>00312                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iRowIndex = 0; (iRowIndex &lt; pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#ae15ca8a4687fea50e44f133678936fd1">getCalvinValues</a>().<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>()); iRowIndex++)
<a name="l00313"></a>00313                         {
<a name="l00314"></a>00314                                 <span class="keywordflow">if</span> (pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#ae15ca8a4687fea50e44f133678936fd1">getCalvinValues</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iRowIndex)-&gt;getCount() != pThatSet-&gt;<a class="code" href="class_calvin_data_set.html#ae15ca8a4687fea50e44f133678936fd1">getCalvinValues</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iRowIndex)-&gt;getCount())
<a name="l00315"></a>00315                                 {
<a name="l00316"></a>00316                                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Data Set &quot;</span> + pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#a6c00c9e61788ec110ce135dc11bc2589">getName</a>() + <span class="stringliteral">&quot; is malformed.&quot;</span>);
<a name="l00317"></a>00317                                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00318"></a>00318                                 }
<a name="l00319"></a>00319                                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iColIndex = 0; (iColIndex &lt; pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#ae15ca8a4687fea50e44f133678936fd1">getCalvinValues</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iRowIndex)-&gt;getCount()); iColIndex++)
<a name="l00320"></a>00320                                 {
<a name="l00321"></a>00321                                         <a class="code" href="class_calvin_value.html">CalvinValue</a>* pThis = pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#ae15ca8a4687fea50e44f133678936fd1">getCalvinValues</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iRowIndex)-&gt;getAt(iColIndex);
<a name="l00322"></a>00322                                         <a class="code" href="class_calvin_value.html">CalvinValue</a>* pThat = pThatSet-&gt;<a class="code" href="class_calvin_data_set.html#ae15ca8a4687fea50e44f133678936fd1">getCalvinValues</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iRowIndex)-&gt;getAt(iColIndex);
<a name="l00323"></a>00323                                         <span class="keywordflow">if</span> (pThis-&gt;<a class="code" href="class_calvin_value.html#ad1ff7b1bd51972478590b09c33b02d19">getParameterType</a>() != pThat-&gt;<a class="code" href="class_calvin_value.html#ad1ff7b1bd51972478590b09c33b02d19">getParameterType</a>())
<a name="l00324"></a>00324                                         {
<a name="l00325"></a>00325                                                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Value Type mismatch for Data Set Column &quot;</span> + pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#a6c00c9e61788ec110ce135dc11bc2589">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + *pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#ac0fe54e125f2361f9c6c6ac1abaf320c">getColumnHeaders</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iColIndex));
<a name="l00326"></a>00326                                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00327"></a>00327                                         }
<a name="l00328"></a>00328                                         <span class="keywordflow">if</span> (pThis-&gt;<a class="code" href="class_calvin_value.html#ad1ff7b1bd51972478590b09c33b02d19">getParameterType</a>() == <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcae196db4427e25955d40149bf195733e2">CalvinValue::FloatType</a>)
<a name="l00329"></a>00329                                         {
<a name="l00330"></a>00330                                                 <span class="keywordtype">float</span> fThis = (float)::<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2">getDouble</a>(pThis-&gt;<a class="code" href="class_calvin_value.html#af02c1826a929843e473bc984853dd831">getValue</a>());
<a name="l00331"></a>00331                                                 <span class="keywordtype">float</span> fThat = (float)::<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2">getDouble</a>(pThat-&gt;<a class="code" href="class_calvin_value.html#af02c1826a929843e473bc984853dd831">getValue</a>());
<a name="l00332"></a>00332                                                 <span class="comment">// allowed absolute difference from fractional tolerance (zero by default)</span>
<a name="l00333"></a>00333                                                 <span class="keywordtype">float</span> fEpsilon2 = fFraction*<a class="code" href="affy-base-types_8h.html#a4886a8f966a69949cefc46a6a3468006">Max</a>( fabs(fThis), fabs(fThat) );
<a name="l00334"></a>00334                                                 <span class="comment">// absolute difference is acceptable if it satisfies either (least restrictive) tolerance</span>
<a name="l00335"></a>00335                                                 <span class="keywordflow">if</span> (fabs(fThis - fThat) &gt; <a class="code" href="affy-base-types_8h.html#a4886a8f966a69949cefc46a6a3468006">Max</a>(fEpsilon,fEpsilon2) )
<a name="l00336"></a>00336                                                 {
<a name="l00337"></a>00337                                                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Value is out of spec. for Data Set Column &quot;</span> + pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#a6c00c9e61788ec110ce135dc11bc2589">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + *pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#ac0fe54e125f2361f9c6c6ac1abaf320c">getColumnHeaders</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iColIndex) + <span class="stringliteral">&quot;\tDifference = &quot;</span> +<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2"> ::getDouble</a>(fabs(fThis - fThat), 10));
<a name="l00338"></a>00338                                                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00339"></a>00339                                                 }
<a name="l00340"></a>00340                                         }
<a name="l00341"></a>00341                                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pThis-&gt;<a class="code" href="class_calvin_value.html#af02c1826a929843e473bc984853dd831">getValue</a>() != pThat-&gt;<a class="code" href="class_calvin_value.html#af02c1826a929843e473bc984853dd831">getValue</a>())
<a name="l00342"></a>00342                                         {
<a name="l00343"></a>00343                                                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Value mismatch for Data Set Column &quot;</span> + pThisGroup-&gt;<a class="code" href="class_calvin_data_group.html#ad08b4947df7c72a5bcf16b8896fe1aa3">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#a6c00c9e61788ec110ce135dc11bc2589">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + *pThisSet-&gt;<a class="code" href="class_calvin_data_set.html#ac0fe54e125f2361f9c6c6ac1abaf320c">getColumnHeaders</a>().<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iColIndex) +  <span class="stringliteral">&quot;\t&quot;</span> + pThis-&gt;<a class="code" href="class_calvin_value.html#af02c1826a929843e473bc984853dd831">getValue</a>() + <span class="stringliteral">&quot; != &quot;</span> + pThat-&gt;<a class="code" href="class_calvin_value.html#af02c1826a929843e473bc984853dd831">getValue</a>());
<a name="l00344"></a>00344                                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00345"></a>00345                                         }
<a name="l00346"></a>00346                                 }
<a name="l00347"></a>00347                         }
<a name="l00348"></a>00348                 }
<a name="l00349"></a>00349         }
<a name="l00350"></a>00350         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00351"></a>00351 }
<a name="l00352"></a>00352 
<a name="l00353"></a><a class="code" href="class_calvin.html#a69a397710ea528e76a8c02316f8f489b">00353</a> <span class="keywordtype">bool</span> <a class="code" href="class_calvin.html#a69a397710ea528e76a8c02316f8f489b">Calvin::equivalentHeader</a>(<span class="keyword">const</span> <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a>&amp; strPrompt, <a class="code" href="class_calvin_header.html" title="A class for storing Calvin header data.">CalvinHeader</a>&amp; headerThis, <a class="code" href="class_calvin_header.html" title="A class for storing Calvin header data.">CalvinHeader</a>&amp; headerThat, std::set&lt;std::string&gt;&amp; setIgnore, std::map&lt;std::string, float&gt;&amp; mapEpsilon, <span class="keywordtype">float</span> fEpsilon, <span class="keywordtype">float</span> fFraction)
<a name="l00354"></a>00354 {
<a name="l00355"></a>00355         <span class="keywordflow">if</span> (headerThis.<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>() != headerThat.<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>())
<a name="l00356"></a>00356         {
<a name="l00357"></a>00357                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;WARNING: &quot;</span> + strPrompt + <span class="stringliteral">&quot;Header does not have the same number of Parameters.&quot;</span>);
<a name="l00358"></a>00358 <span class="comment">//              return false;</span>
<a name="l00359"></a>00359         }
<a name="l00360"></a>00360         <span class="comment">// Note that this check allows the &#39;that&#39; header to have more items in it than the &#39;this&#39; header.</span>
<a name="l00361"></a>00361         <span class="comment">// Assuming that the &#39;this&#39; header is the gold data and the &#39;that&#39; header is the test data.</span>
<a name="l00362"></a>00362         headerThat.<a class="code" href="class_affx_array.html#ab42994245e08d26b5f95371065eaa2f5">quickSort</a>(0); <span class="comment">// By Parameter Name</span>
<a name="l00363"></a>00363         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iIndex = 0; (iIndex &lt; headerThis.<a class="code" href="class_affx_array.html#aa38ea066392d9e26f3979e4bb88d8372">getCount</a>()); iIndex++)
<a name="l00364"></a>00364         {
<a name="l00365"></a>00365                 <a class="code" href="class_calvin_parameter.html">CalvinParameter</a>* pThis = headerThis.<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iIndex);
<a name="l00366"></a>00366                 <span class="keywordtype">int</span> iSearchIndex = headerThat.<a class="code" href="class_affx_array.html#a2b576aa813ea4b6f92f75f9992bac429">binarySearch</a>(*pThis, 0); <span class="comment">// By Parameter Name</span>
<a name="l00367"></a>00367                 <span class="keywordflow">if</span> (iSearchIndex != -1)
<a name="l00368"></a>00368                 {
<a name="l00369"></a>00369                         <a class="code" href="class_calvin_parameter.html">CalvinParameter</a>* pThat = headerThat.<a class="code" href="class_affx_array.html#adb413cac403f36d548cd79477165279e">getAt</a>(iSearchIndex);
<a name="l00370"></a>00370                         <span class="keywordflow">if</span> (!<a class="code" href="class_calvin.html#a7d97cf11c7ac48232c8a8739573eace7">equivalentParameter</a>(strPrompt, *pThis, *pThat, setIgnore, mapEpsilon, fEpsilon, fFraction)) 
<a name="l00371"></a>00371                         {
<a name="l00372"></a>00372                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00373"></a>00373                         }
<a name="l00374"></a>00374                 }
<a name="l00375"></a>00375                 <span class="keywordflow">else</span>
<a name="l00376"></a>00376                 {
<a name="l00377"></a>00377                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, strPrompt + <span class="stringliteral">&quot;Header parameter &quot;</span> + pThis-&gt;<a class="code" href="class_calvin_parameter.html#afdfd32ab33b2f698880452edc033da69">getName</a>() + <span class="stringliteral">&quot; is missing.&quot;</span>);
<a name="l00378"></a>00378                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00379"></a>00379                 }
<a name="l00380"></a>00380         }
<a name="l00381"></a>00381         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00382"></a>00382 }
<a name="l00383"></a>00383 
<a name="l00384"></a><a class="code" href="class_calvin.html#a7d97cf11c7ac48232c8a8739573eace7">00384</a> <span class="keywordtype">bool</span> <a class="code" href="class_calvin.html#a7d97cf11c7ac48232c8a8739573eace7">Calvin::equivalentParameter</a>(<span class="keyword">const</span> <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a>&amp; strPrompt, <a class="code" href="class_calvin_parameter.html">CalvinParameter</a>&amp; This, <a class="code" href="class_calvin_parameter.html">CalvinParameter</a>&amp; That, std::set&lt;std::string&gt;&amp; setIgnore, std::map&lt;std::string, float&gt;&amp; mapEpsilon, <span class="keywordtype">float</span> fEpsilon, <span class="keywordtype">float</span> fFraction)
<a name="l00385"></a>00385 {
<a name="l00386"></a>00386         <span class="keywordflow">if</span> (This.<a class="code" href="class_calvin_parameter.html#afdfd32ab33b2f698880452edc033da69">getName</a>() != That.<a class="code" href="class_calvin_parameter.html#afdfd32ab33b2f698880452edc033da69">getName</a>())
<a name="l00387"></a>00387         {
<a name="l00388"></a>00388                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, strPrompt + <span class="stringliteral">&quot;Header Parameter name mismatch: &quot;</span> + This.<a class="code" href="class_calvin_parameter.html#afdfd32ab33b2f698880452edc033da69">getName</a>() + <span class="stringliteral">&quot; != &quot;</span> + That.<a class="code" href="class_calvin_parameter.html#afdfd32ab33b2f698880452edc033da69">getName</a>());
<a name="l00389"></a>00389                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00390"></a>00390         }
<a name="l00391"></a>00391         <span class="keywordflow">if</span> (This.<a class="code" href="class_calvin_value.html#ad1ff7b1bd51972478590b09c33b02d19">getParameterType</a>() != That.<a class="code" href="class_calvin_value.html#ad1ff7b1bd51972478590b09c33b02d19">getParameterType</a>())
<a name="l00392"></a>00392         {
<a name="l00393"></a>00393                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, strPrompt + <span class="stringliteral">&quot;Header Parameter Type mismatch for parameter: &quot;</span> + This.<a class="code" href="class_calvin_parameter.html#afdfd32ab33b2f698880452edc033da69">getName</a>());
<a name="l00394"></a>00394                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00395"></a>00395         }               
<a name="l00396"></a>00396         <span class="keywordflow">if</span> (setIgnore.find(This.<a class="code" href="class_calvin_parameter.html#afdfd32ab33b2f698880452edc033da69">getName</a>()) == setIgnore.end()) 
<a name="l00397"></a>00397         {
<a name="l00398"></a>00398                 <span class="keywordtype">float</span> fEps = fEpsilon;
<a name="l00399"></a>00399                 <span class="keywordflow">if</span> (mapEpsilon.find(This.<a class="code" href="class_calvin_parameter.html#afdfd32ab33b2f698880452edc033da69">getName</a>()) != mapEpsilon.end()) {fEps = mapEpsilon.find(This.<a class="code" href="class_calvin_parameter.html#afdfd32ab33b2f698880452edc033da69">getName</a>())-&gt;second;}
<a name="l00400"></a>00400                 <span class="keywordflow">if</span> (This.<a class="code" href="class_calvin_value.html#ad1ff7b1bd51972478590b09c33b02d19">getParameterType</a>() == <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcae196db4427e25955d40149bf195733e2">CalvinValue::FloatType</a>)
<a name="l00401"></a>00401                 {
<a name="l00402"></a>00402                         <span class="keywordtype">float</span> fThis = (float)::<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2">getDouble</a>(This.<a class="code" href="class_calvin_value.html#af02c1826a929843e473bc984853dd831">getValue</a>());
<a name="l00403"></a>00403                         <span class="keywordtype">float</span> fThat = (float)::<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2">getDouble</a>(That.<a class="code" href="class_calvin_value.html#af02c1826a929843e473bc984853dd831">getValue</a>());
<a name="l00404"></a>00404                         <span class="comment">// allowed absolute difference from fractional tolerance (zero by default)</span>
<a name="l00405"></a>00405                         <span class="keywordtype">float</span> fEpsilon2 = fFraction*<a class="code" href="affy-base-types_8h.html#a4886a8f966a69949cefc46a6a3468006">Max</a>( fabs(fThis), fabs(fThat) );
<a name="l00406"></a>00406                         <span class="comment">// absolute difference is acceptable if it satisfies either (least restrictive) tolerance</span>
<a name="l00407"></a>00407                         <span class="keywordflow">if</span> (fabs(fThis - fThat) &gt; <a class="code" href="affy-base-types_8h.html#a4886a8f966a69949cefc46a6a3468006">Max</a>(fEps,fEpsilon2))
<a name="l00408"></a>00408                         {
<a name="l00409"></a>00409                                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, strPrompt + <span class="stringliteral">&quot;Header Parameter Value is out of spec. for &quot;</span> + This.<a class="code" href="class_calvin_parameter.html#afdfd32ab33b2f698880452edc033da69">getName</a>() + <span class="stringliteral">&quot;\tDifference = &quot;</span> +<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2"> ::getDouble</a>(fabs(fThis - fThat), 10) + <span class="stringliteral">&quot;\tEpsilon = &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2">getDouble</a>(fEps, 10));
<a name="l00410"></a>00410                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00411"></a>00411                         }
<a name="l00412"></a>00412                 }
<a name="l00413"></a>00413                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (This.<a class="code" href="class_calvin_value.html#af02c1826a929843e473bc984853dd831">getValue</a>() != That.<a class="code" href="class_calvin_value.html#af02c1826a929843e473bc984853dd831">getValue</a>())
<a name="l00414"></a>00414                 {
<a name="l00415"></a>00415                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, strPrompt + <span class="stringliteral">&quot;Header Parameter Value mismatch for &quot;</span> + This.<a class="code" href="class_calvin_parameter.html#afdfd32ab33b2f698880452edc033da69">getName</a>() + <span class="stringliteral">&quot;\t&quot;</span> + This.<a class="code" href="class_calvin_value.html#af02c1826a929843e473bc984853dd831">getValue</a>() + <span class="stringliteral">&quot; != &quot;</span> + That.<a class="code" href="class_calvin_value.html#af02c1826a929843e473bc984853dd831">getValue</a>());
<a name="l00416"></a>00416                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00417"></a>00417                 }
<a name="l00418"></a>00418         }
<a name="l00419"></a>00419         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00420"></a>00420 
<a name="l00421"></a>00421 }
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 
<a name="l00424"></a>00424 <span class="comment">//  We have two functions named equivalent with different signatures.  Extra functionality of setSetIgnore was added.</span>
<a name="l00425"></a>00425 <span class="comment">//  The signatures are maintained for backwards compatibility. </span>
<a name="l00426"></a><a class="code" href="class_calvin.html#a19731876caae551a08ce41f9ae8d3e91">00426</a> <span class="keywordtype">bool</span> <a class="code" href="class_calvin.html#a95ef40bca4fdfa04d22523a4390aec00">Calvin::equivalent</a>(        <span class="keyword">const</span> <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a>&amp; strFileName1, 
<a name="l00427"></a>00427                                 <span class="keyword">const</span> <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a>&amp; strFileName2, 
<a name="l00428"></a>00428                                 std::set&lt;std::string&gt;&amp; setIgnore, 
<a name="l00429"></a>00429                                 std::map&lt;std::string, float&gt;&amp; mapEpsilon, 
<a name="l00430"></a>00430                                 <span class="keywordtype">float</span> fEpsilon, 
<a name="l00431"></a>00431                                 <span class="keywordtype">double</span> dCorrelationCutoff, 
<a name="l00432"></a>00432                                 <span class="keywordtype">bool</span> bCheckHeader, 
<a name="l00433"></a>00433                                 <span class="keywordtype">int</span> iMessageLimit, 
<a name="l00434"></a>00434                                 <span class="keywordtype">float</span> fFraction)
<a name="l00435"></a>00435 {
<a name="l00436"></a>00436         std::set&lt;std::string&gt; setSetIgnore;
<a name="l00437"></a>00437  
<a name="l00438"></a>00438         <span class="keywordflow">return</span> <a class="code" href="class_calvin.html#a95ef40bca4fdfa04d22523a4390aec00">equivalent</a>(      strFileName1, 
<a name="l00439"></a>00439                         strFileName2, 
<a name="l00440"></a>00440                         setIgnore, 
<a name="l00441"></a>00441                         setSetIgnore, 
<a name="l00442"></a>00442                         mapEpsilon, 
<a name="l00443"></a>00443                         fEpsilon, 
<a name="l00444"></a>00444                         dCorrelationCutoff, 
<a name="l00445"></a>00445                         bCheckHeader, 
<a name="l00446"></a>00446                         iMessageLimit, 
<a name="l00447"></a>00447                         fFraction);
<a name="l00448"></a>00448 }
<a name="l00449"></a>00449 
<a name="l00450"></a><a class="code" href="class_calvin.html#aacab8b2783f416d0912d6f354643b003">00450</a> <span class="keywordtype">bool</span> <a class="code" href="class_calvin.html#a95ef40bca4fdfa04d22523a4390aec00">Calvin::equivalent</a>(        <span class="keyword">const</span> <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a>&amp; strFileName1, 
<a name="l00451"></a>00451                                 <span class="keyword">const</span> <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a>&amp; strFileName2, 
<a name="l00452"></a>00452                                 std::set&lt;std::string&gt;&amp; setIgnore, 
<a name="l00453"></a>00453                                 std::set&lt;std::string&gt;&amp; setSetIgnore, 
<a name="l00454"></a>00454                                 std::map&lt;std::string, float&gt;&amp; mapEpsilon, 
<a name="l00455"></a>00455                                 <span class="keywordtype">float</span> fEpsilon, 
<a name="l00456"></a>00456                                 <span class="keywordtype">double</span> dCorrelationCutoff, 
<a name="l00457"></a>00457                                 <span class="keywordtype">bool</span> bCheckHeader, 
<a name="l00458"></a>00458                                 <span class="keywordtype">int</span> iMessageLimit, 
<a name="l00459"></a>00459                                 <span class="keywordtype">float</span> fFraction)
<a name="l00460"></a>00460 {
<a name="l00461"></a>00461         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Comparing &quot;</span> + strFileName1 + <span class="stringliteral">&quot; and &quot;</span> + strFileName2);
<a name="l00462"></a>00462         <span class="keywordtype">bool</span> bSuccessful = <span class="keyword">true</span>;
<a name="l00463"></a>00463         <span class="keywordtype">bool</span> bFileOpen1 = <span class="keyword">false</span>;
<a name="l00464"></a>00464         <span class="keywordtype">bool</span> bFileOpen2 = <span class="keyword">false</span>;
<a name="l00465"></a>00465         <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a> str1;
<a name="l00466"></a>00466         <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a> str2;
<a name="l00467"></a>00467         int8_t c1 = 0;
<a name="l00468"></a>00468         int8_t c2 = 0;
<a name="l00469"></a>00469         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> uc1 = 0;
<a name="l00470"></a>00470         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> uc2 = 0;
<a name="l00471"></a>00471         <span class="keywordtype">short</span> n1 = 0;
<a name="l00472"></a>00472         <span class="keywordtype">short</span> n2 = 0;
<a name="l00473"></a>00473         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> un1 = 0;
<a name="l00474"></a>00474         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> un2 = 0;
<a name="l00475"></a>00475         <span class="keywordtype">int</span> i1 = 0;
<a name="l00476"></a>00476         <span class="keywordtype">int</span> i2 = 0;
<a name="l00477"></a>00477         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui1 = 0;
<a name="l00478"></a>00478         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui2 = 0;
<a name="l00479"></a>00479         <span class="keywordtype">float</span> f1 = 0;
<a name="l00480"></a>00480         <span class="keywordtype">float</span> f2 = 0;
<a name="l00481"></a>00481         <span class="keywordtype">float</span> fEpsilon2 = 0;
<a name="l00482"></a>00482         std::wstring wstr1;
<a name="l00483"></a>00483         std::wstring wstr2;
<a name="l00484"></a>00484         <a class="code" href="classaffymetrix__calvin__io_1_1_generic_file_reader.html">affymetrix_calvin_io::GenericFileReader</a> reader1;
<a name="l00485"></a>00485         <a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html">affymetrix_calvin_io::GenericData</a> genericData1;
<a name="l00486"></a>00486         <a class="code" href="classaffymetrix__calvin__io_1_1_generic_file_reader.html">affymetrix_calvin_io::GenericFileReader</a> reader2;
<a name="l00487"></a>00487         <a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html">affymetrix_calvin_io::GenericData</a> genericData2;
<a name="l00488"></a>00488         <a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html">affymetrix_calvin_io::DataSet</a>* pDataSet1 = NULL;
<a name="l00489"></a>00489         <a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html">affymetrix_calvin_io::DataSet</a>* pDataSet2 = NULL;
<a name="l00490"></a>00490         <span class="keywordflow">try</span>
<a name="l00491"></a>00491         {
<a name="l00492"></a>00492                 reader1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_file_reader.html#ad856db1d86014980c5edc13eb2a50b79">SetFilename</a>(<a class="code" href="class_fs.html#a165f555fa92a445b3e9af7dbd510d693">Fs::convertToUncPath</a>(strFileName1));
<a name="l00493"></a>00493                 reader1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_file_reader.html#a6d9d5489de9f16e5736bfa1b86995691">Open</a>(genericData1);             
<a name="l00494"></a>00494                 bFileOpen1 = <span class="keyword">true</span>;  <span class="comment">// remember status for file exception catch block</span>
<a name="l00495"></a>00495                 <span class="comment">//TODO file exception try/catch block for file1 should move here per Harley</span>
<a name="l00496"></a>00496                 
<a name="l00497"></a>00497                 reader2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_file_reader.html#ad856db1d86014980c5edc13eb2a50b79">SetFilename</a>(<a class="code" href="class_fs.html#a165f555fa92a445b3e9af7dbd510d693">Fs::convertToUncPath</a>(strFileName2));
<a name="l00498"></a>00498                 reader2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_file_reader.html#a6d9d5489de9f16e5736bfa1b86995691">Open</a>(genericData2);             
<a name="l00499"></a>00499                 bFileOpen2 = <span class="keyword">true</span>;  <span class="comment">// remember status for file exception catch block</span>
<a name="l00500"></a>00500                 <span class="comment">//TODO file exception try/catch block for file2 should move here per Harley</span>
<a name="l00501"></a>00501 
<a name="l00502"></a>00502                 <span class="keywordflow">if</span> (bCheckHeader)
<a name="l00503"></a>00503                 {                       
<a name="l00504"></a>00504                         <a class="code" href="class_calvin_parameter.html">CalvinParameter</a> param1(<span class="stringliteral">&quot;FileCreationTime&quot;</span>, <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca32608dd12571799677d4e472299e312a">CalvinValue::TextType</a>, StringUtils::ConvertWCSToMBS(genericData1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr()-&gt;GetFileCreationTime()));      
<a name="l00505"></a>00505                         <a class="code" href="class_calvin_parameter.html">CalvinParameter</a> param2(<span class="stringliteral">&quot;FileCreationTime&quot;</span>, <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca32608dd12571799677d4e472299e312a">CalvinValue::TextType</a>, StringUtils::ConvertWCSToMBS(genericData2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr()-&gt;GetFileCreationTime()));      
<a name="l00506"></a>00506 
<a name="l00507"></a>00507                         <span class="keywordflow">if</span> (!<a class="code" href="class_calvin.html#a7d97cf11c7ac48232c8a8739573eace7">equivalentParameter</a>(<span class="stringliteral">&quot;File &quot;</span>, param1, param1, setIgnore, mapEpsilon, fEpsilon, fFraction)) 
<a name="l00508"></a>00508                         {
<a name="l00509"></a>00509                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00510"></a>00510                         }
<a name="l00511"></a>00511 
<a name="l00512"></a>00512                         <a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html">affymetrix_calvin_io::GenericDataHeader</a>* pHeader1 = genericData1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr();
<a name="l00513"></a>00513                         <a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html">affymetrix_calvin_io::GenericDataHeader</a>* pHeader2 = genericData2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr();
<a name="l00514"></a>00514                         <span class="keywordflow">if</span> (!<a class="code" href="class_calvin.html#a69a397710ea528e76a8c02316f8f489b">equivalentHeader</a>(<span class="stringliteral">&quot;File &quot;</span>, *pHeader1, *pHeader2, setIgnore, mapEpsilon, fEpsilon, fFraction)) 
<a name="l00515"></a>00515                         {
<a name="l00516"></a>00516                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00517"></a>00517                         }
<a name="l00518"></a>00518                         <span class="keywordtype">int</span> iParentCount1 = genericData1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr()-&gt;GetParentCnt();
<a name="l00519"></a>00519                         <span class="keywordtype">int</span> iParentCount2 = genericData2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr()-&gt;GetParentCnt();
<a name="l00520"></a>00520                         <span class="keywordtype">int</span> iParentCount = <a class="code" href="affy-base-types_8h.html#a9e04209162ea72f9985338596262b657">Min</a>(iParentCount1, iParentCount2);
<a name="l00521"></a>00521                         <span class="keywordflow">if</span> (iParentCount1 != iParentCount2)
<a name="l00522"></a>00522                         {
<a name="l00523"></a>00523                                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Files do not have the same number of Parent Headers.&quot;</span>);
<a name="l00524"></a>00524                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00525"></a>00525                                  
<a name="l00526"></a>00526                         }
<a name="l00527"></a>00527                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iParentIndex = 0; (iParentIndex &lt; iParentCount); iParentIndex++)
<a name="l00528"></a>00528                         {
<a name="l00529"></a>00529                                 <a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html">affymetrix_calvin_io::GenericDataHeader</a> Header1 = genericData1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr()-&gt;GetParent(iParentIndex);
<a name="l00530"></a>00530                                 <a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html">affymetrix_calvin_io::GenericDataHeader</a> Header2 = genericData2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr()-&gt;GetParent(iParentIndex);
<a name="l00531"></a>00531                                 <span class="keywordflow">if</span> (!<a class="code" href="class_calvin.html#a69a397710ea528e76a8c02316f8f489b">equivalentHeader</a>(<span class="stringliteral">&quot;Parent &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d">getInt</a>(iParentIndex + 1) + <span class="stringliteral">&quot; &quot;</span>, Header1, Header2, setIgnore, mapEpsilon, fEpsilon, fFraction)) 
<a name="l00532"></a>00532                                 {
<a name="l00533"></a>00533                                         bSuccessful = <span class="keyword">false</span>;
<a name="l00534"></a>00534                                 }
<a name="l00535"></a>00535                         }
<a name="l00536"></a>00536                 }
<a name="l00537"></a>00537                 genericData1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr()-&gt;Clear();
<a name="l00538"></a>00538                 genericData2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#aa4dde02ef7050992a36bcd7c2c231c29">Header</a>().GetGenericDataHdr()-&gt;Clear();
<a name="l00539"></a>00539                 <a class="code" href="_affy_stl_collection_types_8h.html#aafbe16e1466760bd15b7fba33f192042">WStringVector</a> vDataGroupNames1;
<a name="l00540"></a>00540                 <a class="code" href="_affy_stl_collection_types_8h.html#aafbe16e1466760bd15b7fba33f192042">WStringVector</a> vDataGroupNames2;
<a name="l00541"></a>00541                 genericData1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#a06cbe073cc803a554ede2a3d553ce8cb">DataGroupNames</a>(vDataGroupNames1);
<a name="l00542"></a>00542                 genericData2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#a06cbe073cc803a554ede2a3d553ce8cb">DataGroupNames</a>(vDataGroupNames2);
<a name="l00543"></a>00543                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uiDataGroupCount = <a class="code" href="affy-base-types_8h.html#a9e04209162ea72f9985338596262b657">Min</a>(vDataGroupNames1.size(), vDataGroupNames2.size());
<a name="l00544"></a>00544                 <span class="keywordflow">if</span> (vDataGroupNames1.size() != vDataGroupNames2.size())
<a name="l00545"></a>00545                 {
<a name="l00546"></a>00546                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Files do not have the same number of Data Groups. Gold = &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d">getInt</a>(vDataGroupNames1.size()) + <span class="stringliteral">&quot;, generated = &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d">getInt</a>(vDataGroupNames2.size()));
<a name="l00547"></a>00547                         bSuccessful = <span class="keyword">false</span>;
<a name="l00548"></a>00548                 }
<a name="l00549"></a>00549                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uiDataGroupIndex = 0; (uiDataGroupIndex &lt; uiDataGroupCount); uiDataGroupIndex++)
<a name="l00550"></a>00550                 {
<a name="l00551"></a>00551                         <span class="keywordflow">if</span> (vDataGroupNames1[uiDataGroupIndex] != vDataGroupNames2[uiDataGroupIndex])
<a name="l00552"></a>00552                         {
<a name="l00553"></a>00553                                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;File Data Group name mismatch: &quot;</span> + StringUtils::ConvertWCSToMBS(vDataGroupNames1[uiDataGroupIndex]) + <span class="stringliteral">&quot; != &quot;</span> + StringUtils::ConvertWCSToMBS(vDataGroupNames2[uiDataGroupIndex]));
<a name="l00554"></a>00554                                 bSuccessful = <span class="keyword">false</span>;
<a name="l00555"></a>00555                                 <span class="keywordflow">continue</span>;
<a name="l00556"></a>00556                         }
<a name="l00557"></a>00557                         <a class="code" href="_affy_stl_collection_types_8h.html#aafbe16e1466760bd15b7fba33f192042">WStringVector</a> vDataSetNames1;
<a name="l00558"></a>00558                         <a class="code" href="_affy_stl_collection_types_8h.html#aafbe16e1466760bd15b7fba33f192042">WStringVector</a> vDataSetNames2;
<a name="l00559"></a>00559                         genericData1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#a9d22ef227637b4e68aeee1f111fa6f9f">DataSetNames</a>(uiDataGroupIndex, vDataSetNames1);
<a name="l00560"></a>00560                         genericData2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#a9d22ef227637b4e68aeee1f111fa6f9f">DataSetNames</a>(uiDataGroupIndex, vDataSetNames2);
<a name="l00561"></a>00561                         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uiDataSetCount = <a class="code" href="affy-base-types_8h.html#a9e04209162ea72f9985338596262b657">Min</a>(vDataSetNames1.size(), vDataSetNames2.size());
<a name="l00562"></a>00562                         <span class="keywordflow">if</span> (vDataSetNames1.size() != vDataSetNames2.size())
<a name="l00563"></a>00563                         {
<a name="l00564"></a>00564                                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Data Group &quot;</span> + StringUtils::ConvertWCSToMBS(vDataGroupNames1[uiDataGroupIndex]) + <span class="stringliteral">&quot; does not have the same number of Data Sets.&quot;</span>);
<a name="l00565"></a>00565                                 bSuccessful = <span class="keyword">false</span>;
<a name="l00566"></a>00566                                 <span class="keywordflow">continue</span>;
<a name="l00567"></a>00567                         }
<a name="l00568"></a>00568                         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uiDataSetIndex = 0; (uiDataSetIndex &lt; uiDataSetCount); uiDataSetIndex++)
<a name="l00569"></a>00569                         {
<a name="l00570"></a>00570                                 <span class="comment">//Verbose::out(1, &quot;Data Set &quot; + StringUtils::ConvertWCSToMBS(vDataGroupNames1[uiDataGroupIndex]));</span>
<a name="l00571"></a>00571                                 pDataSet1 = genericData1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#a3363c61f5da726d7a7ffcbc49e85a0b2">DataSet</a>(uiDataGroupIndex, uiDataSetIndex);
<a name="l00572"></a>00572                                 pDataSet2 = genericData2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data.html#a3363c61f5da726d7a7ffcbc49e85a0b2">DataSet</a>(uiDataGroupIndex, uiDataSetIndex);
<a name="l00573"></a>00573                                 pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#af9403cf7cabee1069ca9c2437adc5992">Open</a>();
<a name="l00574"></a>00574                                 pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#af9403cf7cabee1069ca9c2437adc5992">Open</a>();
<a name="l00575"></a>00575                                 <span class="keywordflow">if</span> (vDataSetNames1[uiDataSetIndex] != vDataSetNames2[uiDataSetIndex])
<a name="l00576"></a>00576                                 {
<a name="l00577"></a>00577                                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;File Data Set name mismatch: &quot;</span> + StringUtils::ConvertWCSToMBS(vDataGroupNames1[uiDataGroupIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(vDataSetNames1[uiDataSetIndex]) + <span class="stringliteral">&quot; != &quot;</span> + StringUtils::ConvertWCSToMBS(vDataGroupNames2[uiDataGroupIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(vDataSetNames2[uiDataSetIndex]));
<a name="l00578"></a>00578                                         pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#acbb628f5a2c33bbd7a63cde52dad820f">Delete</a>();
<a name="l00579"></a>00579                                         pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#acbb628f5a2c33bbd7a63cde52dad820f">Delete</a>();
<a name="l00580"></a>00580                                         bSuccessful = <span class="keyword">false</span>;
<a name="l00581"></a>00581                                         <span class="keywordflow">continue</span>;
<a name="l00582"></a>00582                                 }
<a name="l00583"></a>00583 
<a name="l00584"></a>00584 <span class="comment">//MG</span>
<a name="l00585"></a>00585 
<a name="l00586"></a>00586                                 <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a> strSetName = StringUtils::ConvertWCSToMBS(vDataGroupNames1[uiDataGroupIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(vDataSetNames1[uiDataSetIndex]) ;
<a name="l00587"></a>00587                                 <span class="keywordflow">if</span> (setSetIgnore.find(strSetName) != setSetIgnore.end()) 
<a name="l00588"></a>00588                                 {
<a name="l00589"></a>00589                                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Not doing a comparison of the DataSet&quot;</span> + strSetName);
<a name="l00590"></a>00590                                         <span class="keywordflow">continue</span>;
<a name="l00591"></a>00591                                 }
<a name="l00592"></a>00592                                 
<a name="l00593"></a>00593                                 <span class="keywordflow">if</span> (pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a2f39be338e28d30836c420d4add1073a">Cols</a>() != pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a2f39be338e28d30836c420d4add1073a">Cols</a>())
<a name="l00594"></a>00594                                 {
<a name="l00595"></a>00595                                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Data Set &quot;</span> + StringUtils::ConvertWCSToMBS(vDataGroupNames1[uiDataGroupIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(vDataSetNames1[uiDataSetIndex]) + <span class="stringliteral">&quot; does not have the same number of Columns. Gold = &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d">getInt</a>(pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a2f39be338e28d30836c420d4add1073a">Cols</a>()) + <span class="stringliteral">&quot;, Generated = &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d">getInt</a>(pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a2f39be338e28d30836c420d4add1073a">Cols</a>()));
<a name="l00596"></a>00596                                         pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#acbb628f5a2c33bbd7a63cde52dad820f">Delete</a>();
<a name="l00597"></a>00597                                         pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#acbb628f5a2c33bbd7a63cde52dad820f">Delete</a>();
<a name="l00598"></a>00598                                         bSuccessful = <span class="keyword">false</span>;
<a name="l00599"></a>00599                                         <span class="keywordflow">continue</span>;
<a name="l00600"></a>00600                                 }
<a name="l00601"></a>00601                                 <span class="keywordflow">if</span> (pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ab51b565cd5e20692e83940027ad169c6">Rows</a>() != pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ab51b565cd5e20692e83940027ad169c6">Rows</a>())
<a name="l00602"></a>00602                                 {
<a name="l00603"></a>00603                                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Data Set &quot;</span> + StringUtils::ConvertWCSToMBS(vDataGroupNames1[uiDataGroupIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(vDataSetNames1[uiDataSetIndex]) + <span class="stringliteral">&quot; does not have the same number of Rows. Gold = &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d">getInt</a>(pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ab51b565cd5e20692e83940027ad169c6">Rows</a>()) + <span class="stringliteral">&quot;, Generated = &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d">getInt</a>(pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ab51b565cd5e20692e83940027ad169c6">Rows</a>()));
<a name="l00604"></a>00604                                         pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#acbb628f5a2c33bbd7a63cde52dad820f">Delete</a>();
<a name="l00605"></a>00605                                         pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#acbb628f5a2c33bbd7a63cde52dad820f">Delete</a>();
<a name="l00606"></a>00606                                         bSuccessful = <span class="keyword">false</span>;
<a name="l00607"></a>00607                                         <span class="keywordflow">continue</span>;
<a name="l00608"></a>00608                                 }
<a name="l00609"></a>00609                                 AffxMultiDimensionalArray&lt;bool&gt; vSkip(pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a2f39be338e28d30836c420d4add1073a">Cols</a>());
<a name="l00610"></a>00610                                 AffxMultiDimensionalArray&lt;float&gt; vEpsilon(pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a2f39be338e28d30836c420d4add1073a">Cols</a>());
<a name="l00611"></a>00611                                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> uiColIndex = 0; (uiColIndex &lt; pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a2f39be338e28d30836c420d4add1073a">Cols</a>()); uiColIndex++)
<a name="l00612"></a>00612                                 {
<a name="l00613"></a>00613                                         <span class="keywordflow">if</span> (pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetName() != pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetName())
<a name="l00614"></a>00614                                         {
<a name="l00615"></a>00615                                                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;File Data Set column name mismatch: &quot;</span> + StringUtils::ConvertWCSToMBS(vDataGroupNames1[uiDataGroupIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(vDataSetNames1[uiDataSetIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetName()) + <span class="stringliteral">&quot; != &quot;</span> + StringUtils::ConvertWCSToMBS(vDataGroupNames2[uiDataGroupIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(vDataSetNames2[uiDataSetIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetName()));
<a name="l00616"></a>00616 <span class="comment">//                                              pDataSet1-&gt;Delete();</span>
<a name="l00617"></a>00617 <span class="comment">//                                              pDataSet2-&gt;Delete();</span>
<a name="l00618"></a>00618                                                 bSuccessful = <span class="keyword">false</span>;
<a name="l00619"></a>00619                                                 <span class="keywordflow">continue</span>;
<a name="l00620"></a>00620                                         }
<a name="l00621"></a>00621                                         <span class="keywordflow">else</span>
<a name="l00622"></a>00622                                         {       
<a name="l00623"></a>00623                                                 <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a> strColumnName = StringUtils::ConvertWCSToMBS(vDataGroupNames1[uiDataGroupIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(vDataSetNames1[uiDataSetIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetName());
<a name="l00624"></a>00624                                                 <span class="keywordflow">if</span> (setIgnore.find(strColumnName) != setIgnore.end()) {vSkip.set(uiColIndex, <span class="keyword">true</span>);}
<a name="l00625"></a>00625                                                 <span class="keywordflow">if</span> (mapEpsilon.find(strColumnName) != mapEpsilon.end()) {vEpsilon.set(uiColIndex, mapEpsilon.find(strColumnName)-&gt;second);}
<a name="l00626"></a>00626                                                 <span class="keywordflow">else</span> {vEpsilon.set(uiColIndex, fEpsilon);}
<a name="l00627"></a>00627                                         }
<a name="l00628"></a>00628                                 }
<a name="l00629"></a>00629                                 AffxMultiDimensionalArray&lt;float&gt; vMaxDifference(pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a2f39be338e28d30836c420d4add1073a">Cols</a>());
<a name="l00630"></a>00630                                 AffxMultiDimensionalArray&lt;int&gt; vMaxDifferenceRow(pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a2f39be338e28d30836c420d4add1073a">Cols</a>());
<a name="l00631"></a>00631                                 <span class="keywordtype">int</span> iMessageCount = 0;
<a name="l00632"></a>00632                                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> uiColIndex = 0; (uiColIndex &lt; pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a2f39be338e28d30836c420d4add1073a">Cols</a>()); uiColIndex++)
<a name="l00633"></a>00633                                 {                                               
<a name="l00634"></a>00634                                         <span class="comment">//Verbose::out(1, &quot;Column: &quot; + StringUtils::ConvertWCSToMBS(pDataSet1-&gt;Header().GetColumnInfo(uiColIndex).GetName()) + &quot;\t&quot; + ::getInt(pDataSet1-&gt;Header().GetColumnInfo(uiColIndex).GetColumnType()));</span>
<a name="l00635"></a>00635 
<a name="l00636"></a>00636                                         <span class="keywordtype">int</span> iFailureCount = 0;
<a name="l00637"></a>00637                                         AffxMultiDimensionalArray&lt;float&gt; mx(pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ab51b565cd5e20692e83940027ad169c6">Rows</a>(), 2);
<a name="l00638"></a>00638                                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> uiRowIndex = 0; (uiRowIndex &lt; pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ab51b565cd5e20692e83940027ad169c6">Rows</a>()); uiRowIndex++)
<a name="l00639"></a>00639                                         {
<a name="l00640"></a>00640                                                 <span class="keywordflow">if</span> (pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetColumnType() != pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetColumnType())
<a name="l00641"></a>00641                                                 {
<a name="l00642"></a>00642                                                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Value Type mismatch for Data Set Column &quot;</span> + StringUtils::ConvertWCSToMBS(vDataGroupNames1[uiDataGroupIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(vDataSetNames1[uiDataSetIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetName()) + <span class="stringliteral">&quot;, Gold = &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d">getInt</a>(pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetColumnType()) + <span class="stringliteral">&quot;, Generated = &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d">getInt</a>(pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetColumnType()));
<a name="l00643"></a>00643 <span class="comment">//                                                      pDataSet1-&gt;Delete();</span>
<a name="l00644"></a>00644 <span class="comment">//                                                      pDataSet2-&gt;Delete();</span>
<a name="l00645"></a>00645                                                         bSuccessful = <span class="keyword">false</span>;
<a name="l00646"></a>00646                                                         <span class="keywordflow">break</span>;
<a name="l00647"></a>00647                                                 }
<a name="l00648"></a>00648                                                 <span class="keywordflow">if</span> (vSkip.get(uiColIndex)) {<span class="keywordflow">continue</span>;}
<a name="l00649"></a>00649                                                 <span class="keywordtype">bool</span> bEquals = <span class="keyword">false</span>;
<a name="l00650"></a>00650                                                 <span class="keywordflow">switch</span> (pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetColumnType())
<a name="l00651"></a>00651                                                 {
<a name="l00652"></a>00652                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca6c9238a8a9ce14e15d005e89671e1579">CalvinValue::Int8Type</a>:
<a name="l00653"></a>00653                                                         pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, c1);
<a name="l00654"></a>00654                                                         pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, c2);
<a name="l00655"></a>00655                                                         bEquals = (c1 == c2);
<a name="l00656"></a>00656                                                         <span class="keywordflow">break</span>;
<a name="l00657"></a>00657                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca34639c05fdcce562ead9aeaa1f36467f">CalvinValue::UInt8Type</a>:
<a name="l00658"></a>00658                                                         pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, uc1);
<a name="l00659"></a>00659                                                         pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, uc2);
<a name="l00660"></a>00660                                                         bEquals = (uc1 == uc2);
<a name="l00661"></a>00661                                                         <span class="keywordflow">break</span>;
<a name="l00662"></a>00662                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcabc1b50e800c3035ef16ce1c12b764edd">CalvinValue::Int16Type</a>:
<a name="l00663"></a>00663                                                         pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, n1);
<a name="l00664"></a>00664                                                         pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, n2);
<a name="l00665"></a>00665                                                         f1 = (float)n1;
<a name="l00666"></a>00666                                                         f2 = (float)n2;
<a name="l00667"></a>00667                                                         <span class="keywordflow">if</span> ((<a class="code" href="class_util.html#a66b3f27deb315aab108936d0830c6991">Util::isFinite</a>(f1)) &amp;&amp; (<a class="code" href="class_util.html#a66b3f27deb315aab108936d0830c6991">Util::isFinite</a>(f2)))
<a name="l00668"></a>00668                                                         {
<a name="l00669"></a>00669                                                                 mx.set(uiRowIndex, 0, f1);
<a name="l00670"></a>00670                                                                 mx.set(uiRowIndex, 1, f2);
<a name="l00671"></a>00671                                                         }
<a name="l00672"></a>00672                                                         <span class="keywordflow">if</span> ((f1 != f1) &amp;&amp; (f2 != f2)) {bEquals = <span class="keyword">true</span>;} <span class="comment">// Both = NaN</span>
<a name="l00673"></a>00673                                                         <span class="keywordflow">else</span> {bEquals = (fabs(f1 - f2) &lt;= vEpsilon.get(uiColIndex));}
<a name="l00674"></a>00674                                                         <span class="keywordflow">break</span>;
<a name="l00675"></a>00675                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcad62acc4aece0eede8b9799fa64605e0e">CalvinValue::UInt16Type</a>:
<a name="l00676"></a>00676                                                         pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, un1);
<a name="l00677"></a>00677                                                         pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, un2);
<a name="l00678"></a>00678                                                         f1 = (float)un1;
<a name="l00679"></a>00679                                                         f2 = (float)un2;
<a name="l00680"></a>00680                                                         <span class="keywordflow">if</span> ((<a class="code" href="class_util.html#a66b3f27deb315aab108936d0830c6991">Util::isFinite</a>(f1)) &amp;&amp; (<a class="code" href="class_util.html#a66b3f27deb315aab108936d0830c6991">Util::isFinite</a>(f2)))
<a name="l00681"></a>00681                                                         {
<a name="l00682"></a>00682                                                                 mx.set(uiRowIndex, 0, f1);
<a name="l00683"></a>00683                                                                 mx.set(uiRowIndex, 1, f2);
<a name="l00684"></a>00684                                                         }
<a name="l00685"></a>00685                                                         <span class="keywordflow">if</span> ((f1 != f1) &amp;&amp; (f2 != f2)) {bEquals = <span class="keyword">true</span>;} <span class="comment">// Both = NaN</span>
<a name="l00686"></a>00686                                                         <span class="keywordflow">else</span> {bEquals = (fabs(f1 - f2) &lt;= vEpsilon.get(uiColIndex));}
<a name="l00687"></a>00687                                                         <span class="keywordflow">break</span>;
<a name="l00688"></a>00688                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcafad92ef7f9371e47f99d9debc790a375">CalvinValue::Int32Type</a>:
<a name="l00689"></a>00689                                                         pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, i1);
<a name="l00690"></a>00690                                                         pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, i2);
<a name="l00691"></a>00691                                                         f1 = (float)i1;
<a name="l00692"></a>00692                                                         f2 = (float)i2;
<a name="l00693"></a>00693                                                         <span class="keywordflow">if</span> ((<a class="code" href="class_util.html#a66b3f27deb315aab108936d0830c6991">Util::isFinite</a>(f1)) &amp;&amp; (<a class="code" href="class_util.html#a66b3f27deb315aab108936d0830c6991">Util::isFinite</a>(f2)))
<a name="l00694"></a>00694                                                         {
<a name="l00695"></a>00695                                                                 mx.set(uiRowIndex, 0, f1);
<a name="l00696"></a>00696                                                                 mx.set(uiRowIndex, 1, f2);
<a name="l00697"></a>00697                                                         }
<a name="l00698"></a>00698                                                         <span class="keywordflow">if</span> ((f1 != f1) &amp;&amp; (f2 != f2)) {bEquals = <span class="keyword">true</span>;} <span class="comment">// Both = NaN</span>
<a name="l00699"></a>00699                                                         <span class="keywordflow">else</span> {bEquals = (fabs(f1 - f2) &lt;= vEpsilon.get(uiColIndex));}
<a name="l00700"></a>00700                                                         <span class="keywordflow">break</span>;
<a name="l00701"></a>00701                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca092060ea46b180b1cc1511cb196bd276">CalvinValue::UInt32Type</a>:
<a name="l00702"></a>00702                                                         pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, ui1);
<a name="l00703"></a>00703                                                         pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, ui2);
<a name="l00704"></a>00704                                                         f1 = (float)ui1;
<a name="l00705"></a>00705                                                         f2 = (float)ui2;
<a name="l00706"></a>00706                                                         <span class="keywordflow">if</span> ((<a class="code" href="class_util.html#a66b3f27deb315aab108936d0830c6991">Util::isFinite</a>(f1)) &amp;&amp; (<a class="code" href="class_util.html#a66b3f27deb315aab108936d0830c6991">Util::isFinite</a>(f2)))
<a name="l00707"></a>00707                                                         {
<a name="l00708"></a>00708                                                                 mx.set(uiRowIndex, 0, f1);
<a name="l00709"></a>00709                                                                 mx.set(uiRowIndex, 1, f2);
<a name="l00710"></a>00710                                                         }
<a name="l00711"></a>00711                                                         <span class="keywordflow">if</span> ((f1 != f1) &amp;&amp; (f2 != f2)) {bEquals = <span class="keyword">true</span>;} <span class="comment">// Both = NaN</span>
<a name="l00712"></a>00712                                                         <span class="keywordflow">else</span> {bEquals = (fabs(f1 - f2) &lt;= vEpsilon.get(uiColIndex));}
<a name="l00713"></a>00713                                                         <span class="keywordflow">break</span>;
<a name="l00714"></a>00714                                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcae196db4427e25955d40149bf195733e2">CalvinValue::FloatType</a>:
<a name="l00715"></a>00715                                                         pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, f1);
<a name="l00716"></a>00716                                                         pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, f2);                                                       
<a name="l00717"></a>00717                                                         fEpsilon2 = fFraction*<a class="code" href="affy-base-types_8h.html#a4886a8f966a69949cefc46a6a3468006">Max</a>( fabs(f1), fabs(f2) );
<a name="l00718"></a>00718                                                         <span class="keywordflow">if</span> ((<a class="code" href="class_util.html#a66b3f27deb315aab108936d0830c6991">Util::isFinite</a>(f1)) &amp;&amp; (<a class="code" href="class_util.html#a66b3f27deb315aab108936d0830c6991">Util::isFinite</a>(f2)))
<a name="l00719"></a>00719                                                         {
<a name="l00720"></a>00720                                                                 mx.set(uiRowIndex, 0, f1);
<a name="l00721"></a>00721                                                                 mx.set(uiRowIndex, 1, f2);
<a name="l00722"></a>00722                                                         }
<a name="l00723"></a>00723                                                         <span class="keywordflow">if</span> ((f1 != f1) &amp;&amp; (f2 != f2)) {bEquals = <span class="keyword">true</span>;} <span class="comment">// Both = NaN</span>
<a name="l00724"></a>00724                                                         <span class="keywordflow">else</span> {bEquals = (fabs(f1 - f2) &lt;= <a class="code" href="affy-base-types_8h.html#a4886a8f966a69949cefc46a6a3468006">Max</a>(vEpsilon.get(uiColIndex),fEpsilon2));}
<a name="l00725"></a>00725                                                         <span class="keywordflow">break</span>;
<a name="l00726"></a>00726                                                 <span class="keywordflow">case</span> 7:
<a name="l00727"></a>00727                                                         pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, str1);
<a name="l00728"></a>00728                                                         pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, str2);                                                     
<a name="l00729"></a>00729                                                         bEquals = (str1 == str2);
<a name="l00730"></a>00730                                                         <span class="keywordflow">break</span>;
<a name="l00731"></a>00731                                                 <span class="keywordflow">case</span> 8:
<a name="l00732"></a>00732                                                         pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, wstr1);
<a name="l00733"></a>00733                                                         pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#a237ec0546d56b1931898f4155f34d917">GetData</a>((<span class="keywordtype">int</span>)uiRowIndex, (<span class="keywordtype">int</span>)uiColIndex, wstr2);                                            
<a name="l00734"></a>00734                                                         bEquals = (wstr1 == wstr2);
<a name="l00735"></a>00735                                                         <span class="keywordflow">break</span>;
<a name="l00736"></a>00736                                                 <span class="keywordflow">default</span>:
<a name="l00737"></a>00737                                                         <span class="keywordflow">break</span>;
<a name="l00738"></a>00738                                                 }
<a name="l00739"></a>00739                                                 <span class="keywordflow">if</span> (!bEquals)
<a name="l00740"></a>00740                                                 {
<a name="l00741"></a>00741                                                         <span class="keywordflow">if</span> ((pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetColumnType() &gt;= 2) &amp;&amp; (pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetColumnType() &lt;= 6))
<a name="l00742"></a>00742                                                         {
<a name="l00743"></a>00743                                                                 iFailureCount++;
<a name="l00744"></a>00744                                                                 <span class="keywordflow">if</span> (fabs(f1 - f2) &gt; vMaxDifference.get(uiColIndex))
<a name="l00745"></a>00745                                                                 {
<a name="l00746"></a>00746                                                                         vMaxDifference.set(uiColIndex, fabs(f1 - f2));
<a name="l00747"></a>00747                                                                         vMaxDifferenceRow.set(uiColIndex, uiRowIndex);
<a name="l00748"></a>00748                                                                 }
<a name="l00749"></a>00749                                                         }
<a name="l00750"></a>00750                                                         <span class="keywordflow">else</span>
<a name="l00751"></a>00751                                                         {
<a name="l00752"></a>00752                                                                 bSuccessful = <span class="keyword">false</span>;
<a name="l00753"></a>00753                                                                 iMessageCount++;
<a name="l00754"></a>00754                                                                 <span class="keywordflow">if</span> (iMessageCount == (iMessageLimit + 1))
<a name="l00755"></a>00755                                                                 {
<a name="l00756"></a>00756                                                                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Message limit reached. Additional messages will be suppressed.&quot;</span>);
<a name="l00757"></a>00757                                                                 }
<a name="l00758"></a>00758                                                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iMessageCount &lt;= iMessageLimit)
<a name="l00759"></a>00759                                                                 {
<a name="l00760"></a>00760                                                                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Value mismatch for Data Set Column &quot;</span> +StringUtils::ConvertWCSToMBS(vDataGroupNames1[uiDataGroupIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(vDataSetNames1[uiDataSetIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetName()) +  <span class="stringliteral">&quot; at row &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#a3bfc6fcf2404cad091f4bc4433ba4ee3">getUnsignedInt</a>(uiRowIndex));
<a name="l00761"></a>00761                                                                 }
<a name="l00762"></a>00762                                                         }
<a name="l00763"></a>00763                                                 }
<a name="l00764"></a>00764                                         }
<a name="l00765"></a>00765                                         <span class="keywordflow">if</span> (vMaxDifference.get(uiColIndex) &gt; 0)
<a name="l00766"></a>00766                                         {
<a name="l00767"></a>00767                                                 <span class="keywordtype">double</span> dCorrelation = mx.corr();
<a name="l00768"></a>00768                                                 <span class="keywordflow">if</span> ((dCorrelation &lt; dCorrelationCutoff) || (dCorrelationCutoff == 1))
<a name="l00769"></a>00769                                                 {
<a name="l00770"></a>00770                                                         bSuccessful = <span class="keyword">false</span>;
<a name="l00771"></a>00771                                                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Value is out of spec. for Data Set Column &quot;</span> + StringUtils::ConvertWCSToMBS(vDataGroupNames1[uiDataGroupIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(vDataSetNames1[uiDataSetIndex]) + <span class="stringliteral">&quot;.&quot;</span> + StringUtils::ConvertWCSToMBS(pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#ae24cb2c4a17ed991a92e0d3aca63acb2">Header</a>().<a class="code" href="classaffymetrix__calvin__io_1_1_data_set_header.html#ae0a5adc862a475f2327273ca40850730">GetColumnInfo</a>(uiColIndex).GetName()) +  <span class="stringliteral">&quot; MaxDifference at row &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#a3bfc6fcf2404cad091f4bc4433ba4ee3">getUnsignedInt</a>(vMaxDifferenceRow.get(uiColIndex)) + <span class="stringliteral">&quot;\tMaxDifference = &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2">getDouble</a>(vMaxDifference.get(uiColIndex), 10) + <span class="stringliteral">&quot;\tNumberFailures = &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d">getInt</a>(iFailureCount) + <span class="stringliteral">&quot;\tEpsilon = &quot;</span> +<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2"> ::getDouble</a>(vEpsilon.get(uiColIndex), 10) + <span class="stringliteral">&quot;\tCorrelation = &quot;</span> + ::<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2">getDouble</a>(dCorrelation, 10) + <span class="stringliteral">&quot;\tNormDifference = &quot;</span> +<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2"> ::getDouble</a>(mx.normDifference(), 10));
<a name="l00772"></a>00772                                                 }
<a name="l00773"></a>00773                                         }
<a name="l00774"></a>00774                                 }
<a name="l00775"></a>00775                                 pDataSet1-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#acbb628f5a2c33bbd7a63cde52dad820f">Delete</a>();
<a name="l00776"></a>00776                                 pDataSet2-&gt;<a class="code" href="classaffymetrix__calvin__io_1_1_data_set.html#acbb628f5a2c33bbd7a63cde52dad820f">Delete</a>();
<a name="l00777"></a>00777                         }
<a name="l00778"></a>00778                 }
<a name="l00779"></a>00779                 <span class="keywordflow">if</span> (bSuccessful)
<a name="l00780"></a>00780                 {
<a name="l00781"></a>00781                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Files are equivalent.&quot;</span>);
<a name="l00782"></a>00782                 }
<a name="l00783"></a>00783         } 
<a name="l00784"></a>00784         <span class="comment">/* When things go wrong see if we can die gracefully here. */</span>
<a name="l00785"></a>00785         <span class="keywordflow">catch</span>(<a class="code" href="class_except.html" title="General purpose exception error for error handling.">Except</a> &amp;e) {
<a name="l00786"></a>00786                 bSuccessful = <span class="keyword">false</span>;
<a name="l00787"></a>00787                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Exception caught. &quot;</span>
<a name="l00788"></a>00788                                   <span class="stringliteral">&quot;Message is: &quot;</span> + <a class="code" href="_convert_8h.html#a9e68e488e4da0371aea30596313537df">ToStr</a>(e.<a class="code" href="class_except.html#a6983a18bbb12fd78301d1ee77b2371ff" title="Standard what() call, just returns error message.">what</a>()));
<a name="l00789"></a>00789         }
<a name="l00790"></a>00790         <span class="keywordflow">catch</span>(<span class="keyword">const</span> std::bad_alloc &amp;e) {
<a name="l00791"></a>00791                 bSuccessful = <span class="keyword">false</span>;
<a name="l00792"></a>00792                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;std::bad_alloc caught. &quot;</span>
<a name="l00793"></a>00793                                   <span class="stringliteral">&quot;The application has run out of memory. &quot;</span>
<a name="l00794"></a>00794                                   <span class="stringliteral">&quot;Message is: &quot;</span> + <a class="code" href="_convert_8h.html#a9e68e488e4da0371aea30596313537df">ToStr</a>(e.what()));
<a name="l00795"></a>00795         }
<a name="l00796"></a>00796         <span class="keywordflow">catch</span>(<a class="code" href="classaffymetrix__calvin__exceptions_1_1_file_not_found_exception.html">affymetrix_calvin_exceptions::FileNotFoundException</a> &amp;fnfe) {
<a name="l00797"></a>00797                 <span class="comment">// rsatin fix for AFFY00023387: check file existence with message if not found</span>
<a name="l00798"></a>00798                 bSuccessful = <span class="keyword">false</span>;
<a name="l00799"></a>00799                 <span class="keywordflow">if</span>( !bFileOpen1 )
<a name="l00800"></a>00800                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;File not found: &#39;&quot;</span> + strFileName1 + <span class="stringliteral">&quot;&#39;&quot;</span>);
<a name="l00801"></a>00801                 <span class="keywordflow">else</span>
<a name="l00802"></a>00802                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;File not found: &#39;&quot;</span> + strFileName2 + <span class="stringliteral">&quot;&#39;&quot;</span>);
<a name="l00803"></a>00803         }
<a name="l00804"></a>00804         <span class="keywordflow">catch</span>(<a class="code" href="classaffymetrix__calvin__exceptions_1_1_unable_to_open_file_exception.html">affymetrix_calvin_exceptions::UnableToOpenFileException</a> &amp;utoe) {
<a name="l00805"></a>00805                 <span class="comment">// rsatin fix for AFFY00023387: check file existence with message if not found</span>
<a name="l00806"></a>00806                 bSuccessful = <span class="keyword">false</span>;
<a name="l00807"></a>00807                 <span class="keywordflow">if</span>( !bFileOpen1 )
<a name="l00808"></a>00808                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Unable to open file: &#39;&quot;</span> + strFileName1 + <span class="stringliteral">&quot;&#39;&quot;</span>);
<a name="l00809"></a>00809                 <span class="keywordflow">else</span>
<a name="l00810"></a>00810                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Unable to open file: &#39;&quot;</span> + strFileName2 + <span class="stringliteral">&quot;&#39;&quot;</span>);
<a name="l00811"></a>00811         }
<a name="l00812"></a>00812         <span class="keywordflow">catch</span>(<a class="code" href="classaffymetrix__calvin__exceptions_1_1_calvin_exception.html">affymetrix_calvin_exceptions::CalvinException</a> &amp;ce) {
<a name="l00813"></a>00813                 std::string strType = <span class="keyword">typeid</span>(ce).name();
<a name="l00814"></a>00814                 bSuccessful = <span class="keyword">false</span>;
<a name="l00815"></a>00815                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;affymetrix_calvin_exceptions::CalvinException caught. &quot;</span> \
<a name="l00816"></a>00816                                   <span class="stringliteral">&quot; Affymetrix GeneChip Command Console library has thrown an exception of type &quot;</span> + strType + \
<a name="l00817"></a>00817                                   <span class="stringliteral">&quot; Message is: &quot;</span> + <a class="code" href="classaffymetrix__calvin__utilities_1_1_string_utils.html#a6f76720a2b06c2705477ee7498d7ccd0">affymetrix_calvin_utilities::StringUtils::ConvertWCSToMBS</a>(ce.<a class="code" href="classaffymetrix__calvin__exceptions_1_1_calvin_exception.html#a24f3db249eaee80ba1010dcc9e4db3d2">Description</a>()));
<a name="l00818"></a>00818         }
<a name="l00819"></a>00819         <span class="keywordflow">catch</span>(<span class="keyword">const</span> std::exception &amp;e) {
<a name="l00820"></a>00820                 bSuccessful = <span class="keyword">false</span>;
<a name="l00821"></a>00821                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;std::exception caught. &quot;</span>
<a name="l00822"></a>00822                                   <span class="stringliteral">&quot;Message is: &quot;</span> + <a class="code" href="_convert_8h.html#a9e68e488e4da0371aea30596313537df">ToStr</a>(e.what()));
<a name="l00823"></a>00823         }
<a name="l00824"></a>00824         <span class="keywordflow">catch</span>(...)
<a name="l00825"></a>00825         {
<a name="l00826"></a>00826                 bSuccessful = <span class="keyword">false</span>;
<a name="l00827"></a>00827                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;Error in equivalency test. Unknown exception thrown.&quot;</span>);
<a name="l00828"></a>00828         }
<a name="l00829"></a>00829         <span class="keywordflow">return</span> bSuccessful;
<a name="l00830"></a>00830 }
<a name="l00831"></a>00831 
<a name="l00836"></a><a class="code" href="class_calvin.html#a013f9f405769d4b46f96de15bd7328d1">00836</a> <span class="keywordtype">bool</span> <a class="code" href="class_calvin.html#a69a397710ea528e76a8c02316f8f489b">Calvin::equivalentHeader</a>(<span class="keyword">const</span> <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a>&amp; strPrompt, <a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html">affymetrix_calvin_io::GenericDataHeader</a>&amp; Header1, <a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html">affymetrix_calvin_io::GenericDataHeader</a>&amp; Header2, std::set&lt;std::string&gt;&amp; setIgnore, std::map&lt;std::string, float&gt;&amp; mapEpsilon, <span class="keywordtype">float</span> fEpsilon, <span class="keywordtype">float</span> fFraction)
<a name="l00837"></a>00837 {
<a name="l00838"></a>00838         <span class="keywordtype">bool</span> bEquivalent = <span class="keyword">true</span>;
<a name="l00839"></a>00839         <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a> strValue1;
<a name="l00840"></a>00840         <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a> strValue2;
<a name="l00841"></a>00841         <span class="comment">//File header</span>
<a name="l00842"></a>00842         <a class="code" href="class_calvin_parameter.html">CalvinParameter</a> paramCalvin1;
<a name="l00843"></a>00843         <a class="code" href="class_calvin_parameter.html">CalvinParameter</a> paramCalvin2;
<a name="l00844"></a>00844         paramCalvin1.<a class="code" href="class_calvin_parameter.html#af6afd227c592962d1e77531555acd075">set</a>(<span class="stringliteral">&quot;FileIdentifier&quot;</span>, <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca47593bcdb3f138507c93e32c33a94499">CalvinValue::AsciiType</a>, Header1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a11f21dee83156bb33470bc9475ef78c0">GetFileId</a>());
<a name="l00845"></a>00845         paramCalvin2.<a class="code" href="class_calvin_parameter.html#af6afd227c592962d1e77531555acd075">set</a>(<span class="stringliteral">&quot;FileIdentifier&quot;</span>, <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca47593bcdb3f138507c93e32c33a94499">CalvinValue::AsciiType</a>, Header2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a11f21dee83156bb33470bc9475ef78c0">GetFileId</a>());
<a name="l00846"></a>00846         <span class="keywordflow">if</span> (!<a class="code" href="class_calvin.html#a7d97cf11c7ac48232c8a8739573eace7">equivalentParameter</a>(strPrompt, paramCalvin1, paramCalvin2, setIgnore, mapEpsilon, fEpsilon, fFraction)) {bEquivalent = <span class="keyword">false</span>;}
<a name="l00847"></a>00847 
<a name="l00848"></a>00848         paramCalvin1.<a class="code" href="class_calvin_parameter.html#af6afd227c592962d1e77531555acd075">set</a>(<span class="stringliteral">&quot;FileTypeIdentifier&quot;</span>, <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca47593bcdb3f138507c93e32c33a94499">CalvinValue::AsciiType</a>, Header1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a84c60c56ba6c64b9fa2cc8f11aa52a81">GetFileTypeId</a>());
<a name="l00849"></a>00849         paramCalvin2.<a class="code" href="class_calvin_parameter.html#af6afd227c592962d1e77531555acd075">set</a>(<span class="stringliteral">&quot;FileTypeIdentifier&quot;</span>, <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca47593bcdb3f138507c93e32c33a94499">CalvinValue::AsciiType</a>, Header2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a84c60c56ba6c64b9fa2cc8f11aa52a81">GetFileTypeId</a>());
<a name="l00850"></a>00850         <span class="keywordflow">if</span> (!<a class="code" href="class_calvin.html#a7d97cf11c7ac48232c8a8739573eace7">equivalentParameter</a>(strPrompt, paramCalvin1, paramCalvin2, setIgnore, mapEpsilon, fEpsilon, fFraction)) {bEquivalent = <span class="keyword">false</span>;}
<a name="l00851"></a>00851 
<a name="l00852"></a>00852         paramCalvin1.<a class="code" href="class_calvin_parameter.html#af6afd227c592962d1e77531555acd075">set</a>(<span class="stringliteral">&quot;FileLocale&quot;</span>, <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca32608dd12571799677d4e472299e312a">CalvinValue::TextType</a>, StringUtils::ConvertWCSToMBS(Header1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a5f88a9ef4cc42b1a2266bf60a38f0ac2">GetLocale</a>()));
<a name="l00853"></a>00853         paramCalvin2.<a class="code" href="class_calvin_parameter.html#af6afd227c592962d1e77531555acd075">set</a>(<span class="stringliteral">&quot;FileLocale&quot;</span>, <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca32608dd12571799677d4e472299e312a">CalvinValue::TextType</a>, StringUtils::ConvertWCSToMBS(Header2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a5f88a9ef4cc42b1a2266bf60a38f0ac2">GetLocale</a>()));
<a name="l00854"></a>00854         <span class="keywordflow">if</span> (!<a class="code" href="class_calvin.html#a7d97cf11c7ac48232c8a8739573eace7">equivalentParameter</a>(strPrompt, paramCalvin1, paramCalvin2, setIgnore, mapEpsilon, fEpsilon, fFraction)) {bEquivalent = <span class="keyword">false</span>;}
<a name="l00855"></a>00855 
<a name="l00856"></a>00856         <span class="comment">// Header Parameters</span>
<a name="l00857"></a>00857         <span class="keywordtype">int</span> iParamCount1 = Header1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a1146def9d93b4ecbe5c13239f7b3d31d">GetNameValParamCnt</a>();
<a name="l00858"></a>00858         <span class="keywordtype">int</span> iParamCount2 = Header2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a1146def9d93b4ecbe5c13239f7b3d31d">GetNameValParamCnt</a>();
<a name="l00859"></a>00859         <span class="keywordflow">if</span> (iParamCount1 != iParamCount2)
<a name="l00860"></a>00860         {
<a name="l00861"></a>00861                 <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, <span class="stringliteral">&quot;WARNING: &quot;</span> + strPrompt + <span class="stringliteral">&quot;Header does not have the same number of Parameters.&quot;</span>);
<a name="l00862"></a>00862 <span class="comment">//              bEquivalent = false;</span>
<a name="l00863"></a>00863         }
<a name="l00864"></a>00864         <a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html">affymetrix_calvin_parameter::ParameterNameValueType</a> param1;
<a name="l00865"></a>00865         <a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html">affymetrix_calvin_parameter::ParameterNameValueType</a> param2;
<a name="l00866"></a>00866         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iParamIndex = 0; (iParamIndex &lt; iParamCount1); iParamIndex++)
<a name="l00867"></a>00867         {
<a name="l00868"></a>00868                 param1 = Header1.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a5e68c1e00b3df93802665f617f2b8f9b">GetNameValParam</a>(iParamIndex);
<a name="l00869"></a>00869                 <span class="comment">//rsatin fix for AFFY00023387: ignore present/absent differences for fields in ignore list</span>
<a name="l00870"></a>00870                 <a class="code" href="class_affx_string.html" title="A class derived from std::string.">AffxString</a> strParam1Name = StringUtils::ConvertWCSToMBS(param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a57579803f0a449d644b9f3a93c07da38">GetName</a>());
<a name="l00871"></a>00871                 <span class="keywordflow">if</span> (setIgnore.find(strParam1Name) != setIgnore.end()) {      
<a name="l00872"></a>00872                         <span class="keywordflow">continue</span>;
<a name="l00873"></a>00873                 }
<a name="l00874"></a>00874                 <span class="keywordtype">bool</span> bFound = <span class="keyword">false</span>;
<a name="l00875"></a>00875                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iParamIndex2 = 0; (iParamIndex2 &lt; iParamCount2); iParamIndex2++)
<a name="l00876"></a>00876                 {
<a name="l00877"></a>00877                         param2 = Header2.<a class="code" href="classaffymetrix__calvin__io_1_1_generic_data_header.html#a5e68c1e00b3df93802665f617f2b8f9b">GetNameValParam</a>(iParamIndex2);
<a name="l00878"></a>00878                         <span class="keywordflow">if</span> (param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a57579803f0a449d644b9f3a93c07da38">GetName</a>() == param2.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a57579803f0a449d644b9f3a93c07da38">GetName</a>())
<a name="l00879"></a>00879                         {
<a name="l00880"></a>00880                                 bFound = <span class="keyword">true</span>;
<a name="l00881"></a>00881                                 <span class="keywordflow">if</span> (param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a0b06936378877cf91734053b08e27b0d">GetParameterType</a>() != param2.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a0b06936378877cf91734053b08e27b0d">GetParameterType</a>())
<a name="l00882"></a>00882                                 {
<a name="l00883"></a>00883                                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, strPrompt + <span class="stringliteral">&quot;Header Parameter Type mismatch for parameter: &quot;</span> + StringUtils::ConvertWCSToMBS(param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a57579803f0a449d644b9f3a93c07da38">GetName</a>()));
<a name="l00884"></a>00884                                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00885"></a>00885                                 }
<a name="l00886"></a>00886                                 <span class="keywordtype">float</span> fFraction_param = 0.0;
<a name="l00887"></a>00887                                 strValue1.clear();
<a name="l00888"></a>00888                                 strValue2.clear();
<a name="l00889"></a>00889                                 <span class="keywordflow">switch</span> (param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a0b06936378877cf91734053b08e27b0d">GetParameterType</a>())
<a name="l00890"></a>00890                                 {
<a name="l00891"></a>00891                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca6c9238a8a9ce14e15d005e89671e1579">CalvinValue::Int8Type</a>:
<a name="l00892"></a>00892                                         strValue1 =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#aaa3c72bbbd18ebea70fe9aadff678af9">GetValueInt8</a>());
<a name="l00893"></a>00893                                         strValue2 =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param2.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#aaa3c72bbbd18ebea70fe9aadff678af9">GetValueInt8</a>());
<a name="l00894"></a>00894                                         <span class="keywordflow">break</span>;
<a name="l00895"></a>00895                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca34639c05fdcce562ead9aeaa1f36467f">CalvinValue::UInt8Type</a>:
<a name="l00896"></a>00896                                         strValue1 =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a6251a45bca7ba8810a3cdf0d5967b2aa">GetValueUInt8</a>());
<a name="l00897"></a>00897                                         strValue2 =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param2.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a6251a45bca7ba8810a3cdf0d5967b2aa">GetValueUInt8</a>());
<a name="l00898"></a>00898                                         <span class="keywordflow">break</span>;
<a name="l00899"></a>00899                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcabc1b50e800c3035ef16ce1c12b764edd">CalvinValue::Int16Type</a>:
<a name="l00900"></a>00900                                         strValue1 =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#af4377b31df1ed52daaa39858599390c9">GetValueInt16</a>());
<a name="l00901"></a>00901                                         strValue2 =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param2.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#af4377b31df1ed52daaa39858599390c9">GetValueInt16</a>());
<a name="l00902"></a>00902                                         <span class="keywordflow">break</span>;
<a name="l00903"></a>00903                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcad62acc4aece0eede8b9799fa64605e0e">CalvinValue::UInt16Type</a>:
<a name="l00904"></a>00904                                         strValue1 =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a3feeac19ce12f1cc1188d091fee5a911">GetValueUInt16</a>());
<a name="l00905"></a>00905                                         strValue2 =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param2.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a3feeac19ce12f1cc1188d091fee5a911">GetValueUInt16</a>());
<a name="l00906"></a>00906                                         <span class="keywordflow">break</span>;
<a name="l00907"></a>00907                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcafad92ef7f9371e47f99d9debc790a375">CalvinValue::Int32Type</a>:
<a name="l00908"></a>00908                                         strValue1 =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#acce040a998f616a12f05d98dc022f9bf">GetValueInt32</a>());
<a name="l00909"></a>00909                                         strValue2 =<a class="code" href="_affx_conv_8cpp.html#ab7d46fb769602a66d9e19f96e792498d"> ::getInt</a>(param2.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#acce040a998f616a12f05d98dc022f9bf">GetValueInt32</a>());
<a name="l00910"></a>00910                                         <span class="keywordflow">break</span>;
<a name="l00911"></a>00911                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca092060ea46b180b1cc1511cb196bd276">CalvinValue::UInt32Type</a>:
<a name="l00912"></a>00912                                         strValue1 =<a class="code" href="_affx_conv_8cpp.html#a3bfc6fcf2404cad091f4bc4433ba4ee3"> ::getUnsignedInt</a>(param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#ae4cba22a21766ee7320c715c779207fa">GetValueUInt32</a>());
<a name="l00913"></a>00913                                         strValue2 =<a class="code" href="_affx_conv_8cpp.html#a3bfc6fcf2404cad091f4bc4433ba4ee3"> ::getUnsignedInt</a>(param2.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#ae4cba22a21766ee7320c715c779207fa">GetValueUInt32</a>());
<a name="l00914"></a>00914                                         <span class="keywordflow">break</span>;
<a name="l00915"></a>00915                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdcae196db4427e25955d40149bf195733e2">CalvinValue::FloatType</a>:
<a name="l00916"></a>00916                                         fFraction_param = fFraction;
<a name="l00917"></a>00917                                         strValue1 =<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2"> ::getDouble</a>(param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a1163655eb9279e87c1eba046c2281d27">GetValueFloat</a>(), 10);
<a name="l00918"></a>00918                                         strValue2 =<a class="code" href="_affx_conv_8cpp.html#a4e40c31006c5b45e47ea0240921b98b2"> ::getDouble</a>(param2.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a1163655eb9279e87c1eba046c2281d27">GetValueFloat</a>(), 10);
<a name="l00919"></a>00919                                         <span class="keywordflow">break</span>;
<a name="l00920"></a>00920                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca47593bcdb3f138507c93e32c33a94499">CalvinValue::AsciiType</a>:
<a name="l00921"></a>00921                                         strValue1 = param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a93e92f72f4e28ba8594ba40780d4fd21">GetValueAscii</a>();
<a name="l00922"></a>00922                                         strValue2 = param2.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a93e92f72f4e28ba8594ba40780d4fd21">GetValueAscii</a>();
<a name="l00923"></a>00923                                         <span class="keywordflow">break</span>;
<a name="l00924"></a>00924                                 <span class="keywordflow">case</span> <a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdca32608dd12571799677d4e472299e312a">CalvinValue::TextType</a>:
<a name="l00925"></a>00925                                         strValue1 = StringUtils::ConvertWCSToMBS(param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#afab08fc7f9a92875eb46ff182eff8b03">GetValueText</a>());
<a name="l00926"></a>00926                                         strValue2 = StringUtils::ConvertWCSToMBS(param2.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#afab08fc7f9a92875eb46ff182eff8b03">GetValueText</a>());
<a name="l00927"></a>00927                                         <span class="keywordflow">break</span>;
<a name="l00928"></a>00928                                 <span class="keywordflow">default</span>:
<a name="l00929"></a>00929                                         <span class="keywordflow">break</span>;
<a name="l00930"></a>00930                                 }
<a name="l00931"></a>00931                                 paramCalvin1.<a class="code" href="class_calvin_parameter.html#af6afd227c592962d1e77531555acd075">set</a>(StringUtils::ConvertWCSToMBS(param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a57579803f0a449d644b9f3a93c07da38">GetName</a>()), (<a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdc">CalvinValue::ParameterType</a>)param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a0b06936378877cf91734053b08e27b0d">GetParameterType</a>(), strValue1);
<a name="l00932"></a>00932                                 paramCalvin2.<a class="code" href="class_calvin_parameter.html#af6afd227c592962d1e77531555acd075">set</a>(StringUtils::ConvertWCSToMBS(param2.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a57579803f0a449d644b9f3a93c07da38">GetName</a>()), (<a class="code" href="class_calvin_value.html#a6d1e56b9d1aff4eef81de2762ee37cdc">CalvinValue::ParameterType</a>)param2.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a0b06936378877cf91734053b08e27b0d">GetParameterType</a>(), strValue2);
<a name="l00933"></a>00933                                 <span class="keywordflow">if</span> (!<a class="code" href="class_calvin.html#a7d97cf11c7ac48232c8a8739573eace7">equivalentParameter</a>(strPrompt, paramCalvin1, paramCalvin2, setIgnore, mapEpsilon, fEpsilon, fFraction_param)) {<span class="keywordflow">return</span> <span class="keyword">false</span>;}
<a name="l00934"></a>00934                         }
<a name="l00935"></a>00935                 }
<a name="l00936"></a>00936                 <span class="keywordflow">if</span> (!bFound)
<a name="l00937"></a>00937                 {
<a name="l00938"></a>00938                         <a class="code" href="class_verbose.html#ac4034f68f4c8d2b49cd6340984b940ce" title="Print a message to the stream.">Verbose::out</a>(1, strPrompt + <span class="stringliteral">&quot;Header Parameter name not found: &quot;</span> + StringUtils::ConvertWCSToMBS(param1.<a class="code" href="classaffymetrix__calvin__parameter_1_1_parameter_name_value_type.html#a57579803f0a449d644b9f3a93c07da38">GetName</a>()));
<a name="l00939"></a>00939                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00940"></a>00940                 }
<a name="l00941"></a>00941         }
<a name="l00942"></a>00942         <span class="keywordflow">return</span> bEquivalent;
<a name="l00943"></a>00943 }
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="_calvin_8cpp.html">Calvin.cpp</a>      </li>
      <li class="footer">Generated on Mon May 16 2011 16:43:57 for Affymetrix Fusion SDK by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>

</body>
</html>
