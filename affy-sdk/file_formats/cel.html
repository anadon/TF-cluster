<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>
      Affymetrix Developer Network
    </title>
    <link href="css/styles.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
	<div id="wrapper">
		<div id="page">
			<div id="header">
				<img alt="Affymetrix.com" src="images/header_banner.jpg" />
			</div>
			<div id="content">
				  <h1>Affymetrix® CEL Data File Format</h1>

		<h2>CEL FILE</h2>

<p><b>Description</b></p>
<p>The CEL file stores the results of the intensity calculations on the pixel values of the DAT file. This includes an intensity value, standard deviation of the intensity, the number of pixels used to calculate the intensity value, a flag to indicate an outlier as calculated by the algorithm and a user defined flag indicating the feature should be excluded from future analysis. The file stores the previously stated data for each feature on the probe array. The information below will describe the following versions:</p>

    <ul>
	<li><a href="#V3">Version 3</a> is generated by the MAS software. This was also known as the ASCII version.</li>
    <li><a href="#V4">Version 4</a> is generated by the GCOS software. This was also known as the binary or XDA version.</li>
    <li><a href="#calvin">Command Console version 1</a> is generated by the Command Console software. This is stored in the Command Console "<a href="generic.html">generic</a>" data file format.</li>
	</ul>

<p><b><a name="V3">Version 3 Format</a></b></p>
<p>The format of the CEL file is an ASCII text file similar to the Windows INI format.</p>

<p>The file is divided up into sections. The start of each section is defined by a line containing a section name enclosed in square braces. The section names are: "CEL", "HEADER", "INTENSITY", "MASKS", "OUTLIERS" and "MODIFIED". The data in each section is of the format TAG=VALUE.</p>

<p>The "CEL" section contains the version number of the file. The TAGS are:</p>

<table> 
<tbody><tr> <th><b>TAG</b></th><th><b>Description</b></th></tr> 
<tr> <td height="14" width="110"> Version</td><td height="14" width="70%">The 
version number. Always set to 3.</td></tr> </tbody></table>

<p>The "HEADER" section contains miscellaneous header information. The TAGS are:</p>

<table> 
<tbody><tr> <th><b>TAG</b></th><th><b>Description</b></th></tr> 
<tr> <td height="14" width="110"> Cols</td><td height="14" width="70%">The number 
of columns in the array (of cells).</td></tr> <tr> <td height="14" width="110"> 
Rows</td><td height="14" width="70%">The number of rows in the array (of cells).</td></tr> 
<tr> <td height="14" width="110"> TotalX</td><td height="14" width="70%">Same 
as Cols.</td></tr> <tr> <td height="14" width="110"> TotalY</td><td height="14" width="70%">Same 
as Rows.</td></tr> <tr> <td height="14" width="110"> OffsetX</td><td height="14" width="70%">Not 
used, always 0.</td></tr> <tr> <td height="14" width="110"> OffsetY</td><td height="14" width="70%">Not 
used, always 0.</td></tr> <tr> <td height="14" width="110"> GridCornerUL</td><td height="14" width="70%">XY 
coordinates of the upper left grid corner in pixel coordinates.</td></tr> <tr> 
<td height="14" width="110"> GridCornerUR</td><td height="14" width="70%">XY coordinates 
of the upper right grid corner in pixel coordinates.</td></tr> <tr> <td height="14" width="110"> 
GridCornerLR</td><td height="14" width="70%">XY coordinates of the lower right 
grid corner in pixel coordinates.</td></tr> <tr> <td height="14" width="110"> 
GridCornerLL</td><td height="14" width="70%">XY coordinates of the lower left 
grid corner in pixel coordinates.</td></tr> <tr> <td height="14" width="110"> 
Axis-invertX</td><td height="14" width="70%">Not used, always 0.</td></tr> <tr> 
<td height="14" width="110"> AxisInvertY</td><td height="14" width="70%">Not 
used, always 0.</td></tr> <tr> <td height="14" width="110"> swapXY</td><td height="14" width="70%">Not 
used, always 0.</td></tr> <tr> <td height="14" width="110"> DatHeader</td><td height="14" width="70%">The 
header from the DAT file.</td></tr> <tr> <td height="14" width="110"> Algorithm</td><td height="14" width="70%">The 
algorithm name used to create the CEL file.</td></tr> <tr> <td height="14" width="110"> 
AlgorithmParameters</td><td height="14" width="70%">The parameters used by the 
algorithm. The format is TAG:VALUE pairs separated by semi-colons or TAG=VALUE 
	pairs separated by spaces.</td></tr> </tbody></table>
	
	<p>The "INTENSITY" section contains intensity information. The TAGS are:</p>
	
	<table> 
<tbody><tr> <th><b>TAG</b></th><th><b>Description</b></th></tr> 
<tr> <td height="14" width="110"> NumberCells</td><td height="14" width="70%">The 
total number of cells in the array (Rows*Cols)</td></tr> <tr> <td height="14" width="110"> 
CellHeader</td><td height="14" width="70%">The header for the remainder of the 
data in this section.<br>The header is always set to: "<span style="font-size: 10pt; line-height: 150%; font-family: Arial;">X 
Y&nbsp;MEAN STDV NPIXELS"</span></td></tr> <tr> <td height="14" width="110"> NA</td><td height="14" width="70%"><font size="2"> 
<span style="font-family: Arial;">The remaining lines in this section contain the 
intensity, standard deviation value and the number of pixels used to compute the 
intensity value for each cell in the array. The order is defined by the header.</span></font></td></tr> 
</tbody></table>

<p>The "MASKS" section specifies which cells have been masked by the user. The TAGS are:</p>

<table> 
<tbody><tr> <th><b>TAG</b></th><th><b>Description</b></th></tr> 
<tr> <td height="14" width="110"> NumberCells</td><td height="14" width="70%">The 
number of masked cells.</td></tr> <tr> <td height="14" width="110"> CellHeader</td><td height="14" width="70%">The 
header for the remainder of the data in this section. The header is always set 
to: "X Y".</td></tr> <tr> <td height="14" width="110"> NA</td><td height="14" width="70%">The 
remaining lines in this section contain the XY coordinates of those cells masked 
by the user.</td></tr> </tbody></table>

<p>The "OUTLIERS" section specifies which cells were called outliers by the software. The TAGS are:</p>

<table> 
<tbody><tr> <th><b>TAG</b></th><th><b>Description</b></th></tr> 
<tr> <td height="14" width="110"> NumberCells</td><td height="14" width="70%">The 
number of outlier cells.</td></tr> <tr> <td height="14" width="110"> CellHeader</td><td height="14" width="70%">The 
header for the remainder of the data in this section. The header is always set 
to: "X Y".</td></tr> <tr> <td height="14" width="110"> NA</td><td height="14" width="70%">The 
remaining lines in this section contain the XY coordinates of those cells called 
outliers by the software.</td></tr> </tbody></table>

<p>The "MODIFIED" section specifies which cells were modified by the user. This feature was dropped in MAS 4 thus the number of cells in this section should always be 0. The TAGS are:</p>

<table> 
<tbody><tr> <th><b>TAG</b></th><th><b>Description</b></th></tr> 
<tr> <td height="14" width="110"> NumberCells</td><td height="14" width="70%">The 
number of outlier cells.</td></tr> <tr> <td height="14" width="110"> CellHeader</td><td height="14" width="70%">The 
header for the remainder of the data in this section. The header is always set 
to: "X Y ORIGMEAN".</td></tr> <tr> <td height="14" width="110"> NA</td><td height="14" width="70%">The 
remaining lines in this section contain the XY coordinates and the original intensity 
value (calculated by the software) of those cells modified by the user.</td></tr> 
</tbody></table>

<p><b><a name="V4">Version 4 Format</a></b></p>
<p>The format of the CEL file is a binary file where values are stored in little-endian format.</p>
<p>The file contents are defined by:</p>

<table> 
<tbody><tr> <th><b>Item</b></th><th><b>Description</b></th><th><b>Type</b></th></tr> 
<tr> <td height="14" width="110">1</td><td height="14" width="70%">Magic number. 
Always set to 64.</td><td height="14" width="214">integer</td></tr> <tr> <td height="14" width="110">2</td><td height="14" width="70%"> 
Version number. Always set to 4.</td><td height="14" width="214">integer</td></tr> 
<tr> <td height="14" width="110">3</td><td height="14" width="70%"> Number of 
columns.</td><td height="14" width="214">integer</td></tr> <tr> <td height="14" width="110"> 
4</td><td height="14" width="70%">Number of rows.</td><td height="14" width="214"> 
integer</td></tr> <tr> <td height="14" width="110"> 5</td><td height="14" width="70%">Number 
of cells (rows*cols).</td><td height="14" width="214"> integer</td></tr> <tr> 
<td height="14" width="110"> 6</td><td height="14" width="70%"> Header length</td><td height="14" width="214">integer</td></tr> 
<tr> <td height="14" width="110"> 7</td><td height="14" width="70%">Header as 
defined in the HEADER section of the version 3 CEL files. The string contains 
TAG=VALUE separated by a space where the TAG names are defined in the version 
3 HEADER section.</td><td height="14" width="214"> char[ length defined above]</td></tr> 
<tr> <td height="14" width="110"> 8</td><td height="14" width="70%"> Algorithm 
name length.</td><td height="14" width="214">integer</td></tr> <tr> <td height="14" width="110"> 
9</td><td height="14" width="70%">The algorithm name used to create the CEL file.</td><td height="14" width="214">char[ 
length defined above]</td></tr> <tr> <td height="14" width="110"> 10</td><td height="14" width="70%">Algorithm 
parameters length.</td><td height="14" width="214"> integer</td></tr> <tr> <td height="14" width="110"> 
11</td><td height="14" width="70%">The parameters used by the algorithm. The format 
is TAG:VALUE pairs separated by semi-colons or TAG=VALUE pairs separated by 
	spaces.</td><td height="14" width="214"> 
char[ length defined above]</td></tr> <tr> <td height="14" width="110"> 12</td><td height="14" width="70%">Cell 
margin used for computing the cells intensity value.</td><td height="14" width="214"> 
integer</td></tr> <tr> <td height="14" width="110"> 13</td><td height="14" width="70%">Number 
of outlier cells.</td><td height="14" width="214">DWORD</td></tr> <tr> <td height="14" width="110"> 
14</td><td height="14" width="70%">Number of masked cells.</td><td height="14" width="214"> 
DWORD</td></tr> <tr> <td height="14" width="110"> 15</td><td height="14" width="70%">Number 
of sub-grids.</td><td height="14" width="214"> integer</td></tr> <tr> <td height="14" width="110"> 
16</td><td height="14" width="70%">Cell entries - this consists of an intensity 
value, standard deviation value and pixel count for each cell in the array.<p>The 
values are stored by row then column starting with the X=0, Y=0 cell. As an example, 
the first five entries are for cells defined by XY coordinates: (0,0), (1,0), 
(2,0), (3,0), (4,0).&lt; /p&gt; </p></td><td height="14" width="214">(float, float, short)</td></tr> 
<tr> <td height="14" width="110"> 17</td><td height="14" width="70%">Masked entries 
- this consists of the XY coordinates of those cells masked by the user.</td><td height="14" width="214"> 
(short, short)</td></tr> <tr> <td height="14" width="110"> 18</td><td height="14" width="70%">Outlier 
entries - this consists of the XY coordinates of those cells called outliers by 
the software.</td><td height="14" width="214"> (short, short)</td></tr> <tr> <td height="14" width="110"> 
19</td><td height="14" width="70%">Sub-grid entries - This is the sub-grid definition. 
There are as many sub-grids in the file as defined by the number of sub-grids 
above. Each sub-grid is defined as:<p>- row number (integer)<br> - column number 
(integer)<br> - upper left x coordinate in pixels (float)<br> - upper left y coordinate 
in pixels (float)<br> - upper right x coordinate in pixels (float)<br> - upper 
right x coordinate in pixels (float)<br> - lower left x coordinate in pixels (float)<br> 
- lower left y coordinate in pixels (float)<br> - lower right x coordinate in 
pixels (float)<br> - lower right x coordinate in pixels (float)<br> - left cell 
position (integer)<br> - top cell position (integer)<br> - right cell position 
(integer)<br> - bottom cell position (integer)</p></td><td height="14" width="214">(integer, 
integer, float, float, float, float, float, float, float, float, integer , integer 
, integer , integer )</td></tr> </tbody></table>

<p>Types used are defined as: integer (A 32-bit signed integer), DWORD (32-bit unsigned integer), float (An 32-bit floating-point number), short (16-bit signed integer).</p>

<p><b><a name="calvin">Command Console Format</a></b></p>
<p>The format of the CEL file generated by the Command Console software uses the Command Console <a href="generic.html">generic</a> data format. The following describes the data sets and groups in the file.</p>

<p>The generic data header shall include:</p>

    <p class="indent">The data type identifier is set to "affymetrix-calvin-intensity"</p>

    <p class="indent">The parameters are dependent on the algorithm used to create the CEL file. For the percentile algorithm these include the following parameters:</p>
	
	<table>
		<tbody><tr>
			<th><b>Parameter Name</b></th>
			<th><b>Definition</b></th>
		</tr>
		<tr>
			<td>affymetrix-algorithm-param-Percentile</td>
			<td>The percentile value used.</td>
		</tr>
			<tr><td>affymetrix-algorithm-param-CellMargin</td>
			<td>The number of pixels around the border to ignore.</td>
		</tr>
			<tr><td>affymetrix-algorithm-param-OutlierHigh</td>
			<td>The high threshold for the outlier calculation.</td>
		</tr>
			<tr><td>affymetrix-algorithm-param-OutlierLow</td>
			<td>The low threshold for the outlier calculation.</td>
		</tr>
		<tr>
			<td>affymetrix-algorithm-param-GridULX</td>
			<td>The X coordinate of the upper left corner of the global grid.</td>
		</tr>
		<tr>
			<td>affymetrix-algorithm-param-GridULY</td>
			<td>The Y coordinate of the upper left corner of the global grid.</td>
		</tr>
		<tr>
			<td>affymetrix-algorithm-param-GridURX</td>
			<td>The X coordinate of the upper right corner of the global grid.</td>
		</tr>
		<tr>
			<td>affymetrix-algorithm-param-GridURX</td>
			<td>The Y coordinate of the upper right corner of the global grid.</td>
		</tr>
		<tr>
			<td>affymetrix-algorithm-param-GridLRX</td>
			<td>The X coordinate of the lower right corner of the global grid.</td>
		</tr>
		<tr>
			<td>affymetrix-algorithm-param-GridLRX</td>
			<td>The Y coordinate of the lower right corner of the global grid.</td>
		</tr>
		<tr>
			<td>affymetrix-algorithm-param-GridLLX</td>
			<td>The X coordinate of the lower left corner of the global grid.</td>
		</tr>
		<tr>
			<td>affymetrix-algorithm-param-GridLLX</td>
			<td>The Y coordinate of the lower left corner of the global grid.</td>
		</tr>
		</tbody></table>
		
		<p>Other parameters include:</p>
		<table>
		<tbody><tr>
			<th><b>Parameter Name</b></th>
			<th><b>Definition</b></th>
		</tr>
		<tr>
			<td>affymetrix-array-type</td>
			<td>The probe array type</td>
		</tr>
		<tr>
			<td>affymetrix-algorithm-name</td>
			<td>The name of the algorithm.</td>
		</tr>
		<tr>
			<td>affymetrix-cel-cols</td>
			<td>The number of columns of features (cells)</td>
		</tr>
		<tr>
			<td>affymetrix-cel-rows</td>
			<td>The number of rows of features (cells)</td>
		</tr>
		<tr>
			<td>affymetrix-file-version</td>
			<td>File version.</td>
		</tr>
		</tbody></table>
		<p>The DAT file parameters (if available) will be stored within the parent data header object.</p>

<p>The intensity data is stored in a single group called Default Group with 5 data sets. The data sets are defined as:</p>

<table>
		<tbody><tr>
			<th><b>Data Set Name</b></th>
			<th><b>Description</b></th>
			<th><b>Number of Columns</b></th>
			<th><b>Column Name</b></th>
			<th><b>Column Type</b></th>
			<th><b>Description</b></th>
		</tr>
		<tr>
			<td>Intensity</td>
			<td>The intensity values for each feature.</td>
			<td>1</td>
			<td>Intensity</td>
			<td>FLOAT</td>
			<td>The intensity value. The row order is the same as defined in the GCOS CEL file.</td>
		</tr>
		<tr>
			<td>StdDev</td>
			<td>The standard deviations of the intensity values.</td>
			<td>1</td>
			<td>StdDev</td>
			<td>FLOAT</td>
			<td>The standard deviation value. The row order is the same as defined in the GCOS CEL file.</td>
		</tr>
		<tr>
			<td>Pixel</td>
			<td>The number of pixels used to calculate the intensity values.</td>
			<td>1</td>
			<td>Pixel</td>
			<td>SHORT</td>
			<td>SHORT - The pixel count value. The row order is the same as defined in the GCOS CEL file.</td>
		</tr>
		<tr>
			<td>Outlier</td>
			<td>The X/Y coordinates of those features called as outliers by the 
			algorithm.</td>
			<td>2</td>
			<td>X<p>Y</p></td>
			<td>SHORT<p>SHORT</p></td>
			<td>The X coordinate of the outlier cell.<p>The Y 
			coordinate of the outlier cell.</p></td>
		</tr>
		<tr>
			<td>Mask</td>
			<td>The X/Y coordinates of the user masked features.</td>
			<td>2</td>
			<td>X<p>Y</p></td>
			<td>SHORT<p>SHORT</p></td>
			<td>The X coordinate of the outlier cell.<p>The Y 
			coordinate of the outlier cell.</p></td>
		</tr>
		</tbody></table>

			</div>
			<div id="footer">
				&#169; 2009 Affymetrix, Inc. All rights reserved.
			</div>
		</div>
	</div>
  </body>
</html>